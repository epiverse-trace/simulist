<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Internal simulation function called by the exported simulation functions within simulist — .sim_internal • simulist</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Internal simulation function called by the exported simulation functions within simulist — .sim_internal"><meta name="description" content='This internal function simulates a line list, and
when sim_type is "contacts" or "outbreak" a contacts table as well.'><meta property="og:description" content='This internal function simulates a line list, and
when sim_type is "contacts" or "outbreak" a contacts table as well.'><meta property="og:image" content="https://epiverse-trace.github.io/simulist/logo.svg"><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XZ471458FQ');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">
    <a href="https://epiverse-trace.github.io/" class="external-link"><img src="https://epiverse-trace.github.io/blueprints/logo_white.svg" id="logo" alt="Epiverse-TRACE"></a>
    <a class="navbar-brand me-2" href="../index.html">simulist</a>
    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.3.0</small>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/simulist.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Customising simulated outbreak</h6></li>
    <li><a class="dropdown-item" href="../articles/age-strat-risks.html">Age-stratified hospitalisation and death risks</a></li>
    <li><a class="dropdown-item" href="../articles/age-struct-pop.html">Age structured population</a></li>
    <li><a class="dropdown-item" href="../articles/time-varying-cfr.html">Time-varying case fatality risk</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Wrangling and plotting data</h6></li>
    <li><a class="dropdown-item" href="../articles/wrangling-linelist.html">Wrangling simulated outbreak data</a></li>
    <li><a class="dropdown-item" href="../articles/vis-linelist.html">Visualising simulated data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Developer Documentation</h6></li>
    <li><a class="dropdown-item" href="../articles/design-principles.html">Design Principles for {simulist}</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epiverse-trace/simulist/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Internal simulation function called by the exported simulation functions within <span class="pkg">simulist</span></h1>
      <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/simulist/blob/HEAD/R/sim_internal.R" class="external-link"><code>R/sim_internal.R</code></a></small>
      <div class="d-none name"><code>dot-sim_internal.Rd</code></div>
    </div>
    <div class="ref-description section level2">
    <p>This internal function simulates a line list, and
when <code>sim_type</code> is <code>"contacts"</code> or <code>"outbreak"</code> a contacts table as well.</p>
    </div>
    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">.sim_internal</span><span class="op">(</span></span>
<span>  sim_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"linelist"</span>, <span class="st">"contacts"</span>, <span class="st">"outbreak"</span><span class="op">)</span>,</span>
<span>  <span class="va">contact_distribution</span>,</span>
<span>  <span class="va">infect_period</span>,</span>
<span>  <span class="va">prob_infect</span>,</span>
<span>  onset_to_hosp <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  onset_to_death <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  onset_to_recovery <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  hosp_risk <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  hosp_death_risk <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  non_hosp_death_risk <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">outbreak_start_date</span>,</span>
<span>  anonymise <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">outbreak_size</span>,</span>
<span>  <span class="va">population_age</span>,</span>
<span>  case_type_probs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  contact_tracing_status_probs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">config</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>
    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt id="arg-sim-type">sim_type<a class="anchor" aria-label="anchor" href="#arg-sim-type"></a></dt>
<dd><p>A <code>character</code> string specifying which simulation function
this function is being called within.</p></dd>
<dt id="arg-contact-distribution">contact_distribution<a class="anchor" aria-label="anchor" href="#arg-contact-distribution"></a></dt>
<dd><p>An <code>&lt;epidist&gt;</code> object or anonymous function for
the contact distribution. This is any discrete density function that
produces non-negative integers (including zero, \(\mathbb{N}_0\)) for the
number of contacts per infection.</p></dd>
<dt id="arg-infect-period">infect_period<a class="anchor" aria-label="anchor" href="#arg-infect-period"></a></dt>
<dd><p>An <code>&lt;epidist&gt;</code> object or anonymous function for
the infectious period. This defines the duration from becoming infectious
to no longer infectious. In the simulation, individuals are assumed to
become infectious immediately after being infected (the latency period is
assumed to be zero). The time intervals between an infected individual and
their contacts are assumed to be uniformly distributed within the
infectious period.</p></dd>
<dt id="arg-prob-infect">prob_infect<a class="anchor" aria-label="anchor" href="#arg-prob-infect"></a></dt>
<dd><p>A single <code>numeric</code> for the probability of a secondary
contact being infected by an infected primary contact.</p></dd>
<dt id="arg-onset-to-hosp">onset_to_hosp<a class="anchor" aria-label="anchor" href="#arg-onset-to-hosp"></a></dt>
<dd><p>An <code>&lt;epidist&gt;</code> object, an anonymous function for
the onset to hospitalisation delay distribution, or <code>NA</code> to not simulate
hospitalisation (admission) dates.</p></dd>
<dt id="arg-onset-to-death">onset_to_death<a class="anchor" aria-label="anchor" href="#arg-onset-to-death"></a></dt>
<dd><p>An <code>&lt;epidist&gt;</code> object, an anonymous function for
the onset to death delay distribution, or <code>NA</code> to not simulate dates for
individuals that died.</p></dd>
<dt id="arg-onset-to-recovery">onset_to_recovery<a class="anchor" aria-label="anchor" href="#arg-onset-to-recovery"></a></dt>
<dd><p>An <code>&lt;epidist&gt;</code> object, an anonymous function for
the onset to death delay distribution, or <code>NA</code> to not simulate dates for
individuals that recovered. Default is <code>NA</code> so by default cases that
recover get an <code>NA</code> in the <code>$date_outcome</code> line list column.</p></dd>
<dt id="arg-hosp-risk">hosp_risk<a class="anchor" aria-label="anchor" href="#arg-hosp-risk"></a></dt>
<dd><p>Either a single <code>numeric</code> for the hospitalisation risk of
everyone in the population, or a <code>&lt;data.frame&gt;</code> with age specific
hospitalisation risks Default is 20% hospitalisation (<code>0.2</code>) for the entire
population. If the <code>onset_to_hosp</code> argument is set to <code>NA</code> this argument
should also be set to <code>NA</code>. See details and examples for more information.</p></dd>
<dt id="arg-hosp-death-risk">hosp_death_risk<a class="anchor" aria-label="anchor" href="#arg-hosp-death-risk"></a></dt>
<dd><p>Either a single <code>numeric</code> for the death risk for
hospitalised individuals across the population, or a <code>&lt;data.frame&gt;</code> with age
specific hospitalised death risks Default is 50% death risk in hospitals
(<code>0.5</code>) for the entire population. If the <code>onset_to_death</code> argument is set
to <code>NA</code> this argument should also be set to <code>NA</code>. See details and examples
for more information. If a time-varying death risk is specified in the
<code>config</code> the <code>hosp_death_risk</code> is interpreted as the maximum risk across
the epidemic.</p></dd>
<dt id="arg-non-hosp-death-risk">non_hosp_death_risk<a class="anchor" aria-label="anchor" href="#arg-non-hosp-death-risk"></a></dt>
<dd><p>Either a single <code>numeric</code> for the death risk for
outside of hospitals across the population, or a <code>&lt;data.frame&gt;</code> with age
specific death risks outside of hospitals. Default is 5% death risk outside
of hospitals  (<code>0.05</code>) for the entire population. If the <code>onset_to_death</code>
argument is set to <code>NA</code> this argument should also be set to <code>NA</code>. See
details and examples for more information. If a time-varying death risk is
specified in the <code>config</code> the <code>non_hosp_death_risk</code> is interpreted as the
maximum risk across the epidemic.</p></dd>
<dt id="arg-outbreak-start-date">outbreak_start_date<a class="anchor" aria-label="anchor" href="#arg-outbreak-start-date"></a></dt>
<dd><p>A <code>date</code> for the start of the outbreak.</p></dd>
<dt id="arg-anonymise">anonymise<a class="anchor" aria-label="anchor" href="#arg-anonymise"></a></dt>
<dd><p>A <code>logical</code> boolean for whether case names should be
anonymised. Default is <code>FALSE</code>.</p></dd>
<dt id="arg-outbreak-size">outbreak_size<a class="anchor" aria-label="anchor" href="#arg-outbreak-size"></a></dt>
<dd><p>A <code>numeric</code> vector of length 2 defining the minimum and
the maximum number of infected individuals for the simulated outbreak.
Default is <code>c(10, 1e4)</code>, so the minimum outbreak size is 10 infected
individuals, and the maximum outbreak size is 10,000 infected individuals.
Either number can be changed to increase or decrease the maximum or minimum
outbreak size to allow simulating larger or smaller outbreaks. If the
minimum outbreak size cannot be reached after running the simulation for
many iterations (internally) then the function errors, whereas if the
maximum outbreak size is exceeded the function returns the data early and a
warning stating how many cases and contacts are returned.</p></dd>
<dt id="arg-population-age">population_age<a class="anchor" aria-label="anchor" href="#arg-population-age"></a></dt>
<dd><p>Either a <code>numeric</code> vector with two elements or a
<code>&lt;data.frame&gt;</code> with age structure in the population. Use a <code>numeric</code> vector
to specific the age range of the population, the first element is the lower
bound for the age range, and and the second is the upper bound for the age
range (both inclusive, i.e. [lower, upper]). The <code>&lt;data.frame&gt;</code> with
age groups and the proportion of the population in that group. See details
and examples for more information.</p></dd>
<dt id="arg-case-type-probs">case_type_probs<a class="anchor" aria-label="anchor" href="#arg-case-type-probs"></a></dt>
<dd><p>A named <code>numeric</code> vector with the probability of
each case type. The names of the vector must be <code>"suspected"</code>, <code>"probable"</code>,
<code>"confirmed"</code>. Values of each case type must sum to one.</p></dd>
<dt id="arg-contact-tracing-status-probs">contact_tracing_status_probs<a class="anchor" aria-label="anchor" href="#arg-contact-tracing-status-probs"></a></dt>
<dd><p>A named <code>numeric</code> vector with the
probability of each contact tracing status. The names of the vector must
be <code>"under_followup"</code>, <code>"lost_to_followup"</code>, <code>"unknown"</code>. Values of each
contact tracing status must sum to one.</p></dd>
<dt id="arg-config">config<a class="anchor" aria-label="anchor" href="#arg-config"></a></dt>
<dd><p>A list of settings to adjust the randomly sampled delays and
Ct values. See <code><a href="create_config.html">create_config()</a></code> for more information.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
<p>A <code>&lt;data.frame&gt;</code> if <code>sim_type</code> is <code>"linelist"</code> or <code>"contacts"</code>, or a
list of two <code>&lt;data.frame&gt;</code>s if <code>sim_type</code> is <code>"outbreak"</code>.</p>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>
    <footer><div class="pkgdown-footer-left">
  <p>Developed by Joshua W. Lambert, Carmen Tamayo.</p>
</div>
<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.9000.</p>
</div>
    </footer></div>
  </body></html>

