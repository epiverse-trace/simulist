<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Reporting delays and right-truncation of line list data • simulist</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Reporting delays and right-truncation of line list data">
<!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XZ471458FQ');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">
    <a href="https://epiverse-trace.github.io/" class="external-link"><img src="https://epiverse-trace.github.io/blueprints/logo_white.svg" id="logo" alt="Epiverse-TRACE"></a>
    <a class="navbar-brand me-2" href="../index.html">simulist</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.6.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/simulist.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Customising simulated outbreak</h6></li>
    <li><a class="dropdown-item" href="../articles/age-strat-risks.html">Age-stratified hospitalisation and death risks</a></li>
    <li><a class="dropdown-item" href="../articles/age-struct-pop.html">Age-structured population</a></li>
    <li><a class="dropdown-item" href="../articles/time-varying-cfr.html">Time-varying case fatality risk</a></li>
    <li><a class="dropdown-item" href="../articles/reporting-delays-truncation.html">Reporting delays and right-truncation of line list data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Wrangling and plotting data</h6></li>
    <li><a class="dropdown-item" href="../articles/wrangling-linelist.html">Wrangling simulated outbreak data</a></li>
    <li><a class="dropdown-item" href="../articles/vis-linelist.html">Visualising simulated data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Developer Documentation</h6></li>
    <li><a class="dropdown-item" href="../articles/design-principles.html">Design Principles for {simulist}</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epiverse-trace/simulist/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Reporting delays and right-truncation of line list data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/simulist/blob/main/vignettes/reporting-delays-truncation.Rmd" class="external-link"><code>vignettes/reporting-delays-truncation.Rmd</code></a></small>
      <div class="d-none name"><code>reporting-delays-truncation.Rmd</code></div>
    </div>

    
    
<div class="alert alert-info">
<p>If you are unfamiliar with the {simulist} package or the
<code><a href="../reference/sim_linelist.html">sim_linelist()</a></code> function <a href="simulist.html">Get Started
vignette</a> is a great place to start.</p>
</div>
<p>This vignette covers reporting delays in line list data, how to use
{simulist} to produce line list data with a delay between symptom onset
and reporting, explains right truncation in outbreak data sets and shows
how to use the <code><a href="../reference/truncate_linelist.html">truncate_linelist()</a></code> function in {simulist}
to augment a simulated line list to resemble real-time outbreak
data.</p>
<div class="section level2">
<h2 id="reporting-delays">Reporting delays<a class="anchor" aria-label="anchor" href="#reporting-delays"></a>
</h2>
<p>Reporting delays in line list data during an infectious disease
outbreak refer to the time lag between when an event (e.g., infection,
symptom onset, or hospitalisation) occurs and when it is officially
recorded or reported. These delays can arise from factors like
diagnostic testing turnaround times, administrative processing, or
delayed healthcare-seeking behaviour. In line list data sets, these
delays are captured as separate times/dates for different event types,
such as the dates of symptom onset, specimen collection, laboratory
confirmation, or case reporting. For each case, the delay is the
difference between these times/dates, allowing researchers to quantify
and adjust for reporting delays when analysing outbreak dynamics.
Accurate recording of these dates is crucial for reconstructing the
epidemic curve and assessing the timeliness of public health
responses.</p>
<p>In {simulist}, <code><a href="../reference/sim_linelist.html">sim_linelist()</a></code> outputs a line list with a
date of reporting (<code>$date_reporting</code> column), which by
default will be identical to the date of symptom onset
(<code>$date_onset</code>). However, it is possible to parameterise a
reporting delay that can be used by <code><a href="../reference/sim_linelist.html">sim_linelist()</a></code> to
simulate a delay between symptom onset and reporting. In {simulist} we
assume that the reporting delay is the delay between symptom onset and
it being reported, it does not reflect reporting of hospitalisation or
outcome times.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/epiverse-trace/simulist" class="external-link">simulist</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.reconverse.org/incidence2/" class="external-link">incidence2</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: grates</span></span></code></pre></div>
<p>First we load the required delay distributions using the
{epiparameter} package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">contact_distribution</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://epiverse-trace.github.io/epiparameter/reference/epiparameter.html" class="external-link">epiparameter</a></span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"COVID-19"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"contact distribution"</span>,</span>
<span>  prob_distribution <span class="op">=</span> <span class="fu"><a href="https://epiverse-trace.github.io/epiparameter/reference/create_prob_distribution.html" class="external-link">create_prob_distribution</a></span><span class="op">(</span></span>
<span>    prob_distribution <span class="op">=</span> <span class="st">"pois"</span>,</span>
<span>    prob_distribution_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Citation cannot be created as author, year, journal or title is missing</span></span>
<span></span>
<span><span class="va">infectious_period</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://epiverse-trace.github.io/epiparameter/reference/epiparameter.html" class="external-link">epiparameter</a></span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"COVID-19"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"infectious period"</span>,</span>
<span>  prob_distribution <span class="op">=</span> <span class="fu"><a href="https://epiverse-trace.github.io/epiparameter/reference/create_prob_distribution.html" class="external-link">create_prob_distribution</a></span><span class="op">(</span></span>
<span>    prob_distribution <span class="op">=</span> <span class="st">"gamma"</span>,</span>
<span>    prob_distribution_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="fl">3</span>, scale <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Citation cannot be created as author, year, journal or title is missing</span></span>
<span></span>
<span><span class="va">onset_to_hosp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://epiverse-trace.github.io/epiparameter/reference/epiparameter.html" class="external-link">epiparameter</a></span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"COVID-19"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"onset to hospitalisation"</span>,</span>
<span>  prob_distribution <span class="op">=</span> <span class="fu"><a href="https://epiverse-trace.github.io/epiparameter/reference/create_prob_distribution.html" class="external-link">create_prob_distribution</a></span><span class="op">(</span></span>
<span>    prob_distribution <span class="op">=</span> <span class="st">"lnorm"</span>,</span>
<span>    prob_distribution_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>meanlog <span class="op">=</span> <span class="fl">1</span>, sdlog <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Citation cannot be created as author, year, journal or title is missing</span></span>
<span></span>
<span><span class="co"># get onset to death from {epiparameter} database</span></span>
<span><span class="va">onset_to_death</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://epiverse-trace.github.io/epiparameter/reference/epiparameter_db.html" class="external-link">epiparameter_db</a></span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"COVID-19"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"onset to death"</span>,</span>
<span>  single_epiparameter <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Using Linton N, Kobayashi T, Yang Y, Hayashi K, Akhmetzhanov A, Jung S, Yuan</span></span>
<span><span class="co">#&gt; B, Kinoshita R, Nishiura H (2020). "Incubation Period and Other</span></span>
<span><span class="co">#&gt; Epidemiological Characteristics of 2019 Novel Coronavirus Infections</span></span>
<span><span class="co">#&gt; with Right Truncation: A Statistical Analysis of Publicly Available</span></span>
<span><span class="co">#&gt; Case Data." _Journal of Clinical Medicine_. doi:10.3390/jcm9020538</span></span>
<span><span class="co">#&gt; &lt;https://doi.org/10.3390/jcm9020538&gt;.. </span></span>
<span><span class="co">#&gt; To retrieve the citation use the 'get_citation' function</span></span></code></pre></div>
<p>Setting the seed ensures we have the same output each time the
vignette is rendered. When using {simulist}, setting the seed is not
required unless you need to simulate the same line list multiple
times.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span></code></pre></div>
<p>Using a simple line list simulation without specifying a reporting
delay will produce reporting times identical to symptom onset times:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_linelist.html">sim_linelist</a></span><span class="op">(</span></span>
<span>  contact_distribution <span class="op">=</span> <span class="va">contact_distribution</span>,</span>
<span>  infectious_period <span class="op">=</span> <span class="va">infectious_period</span>,</span>
<span>  prob_infection <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  onset_to_hosp <span class="op">=</span> <span class="va">onset_to_hosp</span>,</span>
<span>  onset_to_death <span class="op">=</span> <span class="va">onset_to_death</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">date_onset</span>, <span class="va">linelist</span><span class="op">$</span><span class="va">date_reporting</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>The reporting delay can be specified as a (random) number generating
function to the <code>reporting_delay</code> argument in
<code><a href="../reference/sim_linelist.html">sim_linelist()</a></code>.</p>
<p>In this example we assume the reporting delays are distributed
according to a lognormal distribution with parameters:
<code>meanlog = 1</code> and <code>sdlog = 1</code> (or a mean of
approximately 4.5 days and standard deviation of 5.9 days).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_linelist.html">sim_linelist</a></span><span class="op">(</span></span>
<span>  contact_distribution <span class="op">=</span> <span class="va">contact_distribution</span>,</span>
<span>  infectious_period <span class="op">=</span> <span class="va">infectious_period</span>,</span>
<span>  prob_infection <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  onset_to_hosp <span class="op">=</span> <span class="va">onset_to_hosp</span>,</span>
<span>  onset_to_death <span class="op">=</span> <span class="va">onset_to_death</span>,</span>
<span>  reporting_delay <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/Lognormal.html" class="external-link">rlnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">x</span>, meanlog <span class="op">=</span> <span class="fl">1</span>, sdlog <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id            case_name case_type sex age date_onset date_reporting</span></span>
<span><span class="co">#&gt; 1  1       Yoonus al-Azam suspected   m  51 2023-01-01     2023-01-07</span></span>
<span><span class="co">#&gt; 2  2       Kristina Clark confirmed   f  53 2023-01-04     2023-01-06</span></span>
<span><span class="co">#&gt; 3  3         Karen Meehan confirmed   f  16 2023-01-05     2023-01-20</span></span>
<span><span class="co">#&gt; 4  4 Ritika Brandenburger suspected   f  41 2023-01-05     2023-01-09</span></span>
<span><span class="co">#&gt; 5  5       Steven Kaliski confirmed   m   4 2023-01-04     2023-01-09</span></span>
<span><span class="co">#&gt; 6  6          Keely Atene suspected   f  68 2023-01-05     2023-01-12</span></span>
<span><span class="co">#&gt;   date_admission   outcome date_outcome date_first_contact date_last_contact</span></span>
<span><span class="co">#&gt; 1     2023-01-03      died   2023-01-26               &lt;NA&gt;              &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2           &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-28        2023-01-03</span></span>
<span><span class="co">#&gt; 3           &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-29        2023-01-06</span></span>
<span><span class="co">#&gt; 4           &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-31        2023-01-05</span></span>
<span><span class="co">#&gt; 5           &lt;NA&gt; recovered         &lt;NA&gt;         2023-01-02        2023-01-05</span></span>
<span><span class="co">#&gt; 6           &lt;NA&gt; recovered         &lt;NA&gt;         2023-01-02        2023-01-06</span></span>
<span><span class="co">#&gt;   ct_value</span></span>
<span><span class="co">#&gt; 1       NA</span></span>
<span><span class="co">#&gt; 2     26.1</span></span>
<span><span class="co">#&gt; 3     26.6</span></span>
<span><span class="co">#&gt; 4       NA</span></span>
<span><span class="co">#&gt; 5     25.0</span></span>
<span><span class="co">#&gt; 6       NA</span></span></code></pre></div>
<p>Here from the first 6 rows of the line list you can see differences
between the <code>$date_onset</code> column and the
<code>$date_reporting</code> column.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tidy_linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"date_onset"</span>, <span class="st">"date_reporting"</span>, <span class="st">"date_admission"</span>, <span class="st">"date_outcome"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>ordering_value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">name</span> <span class="op">==</span> <span class="st">"date_onset"</span>, <span class="va">value</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co"># nolint consecutive_mutate_linter</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>case_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html" class="external-link">reorder</a></span><span class="op">(</span><span class="va">case_name</span>, <span class="va">ordering_value</span>, <span class="va">min</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="co"># nolint consecutive_mutate_linter</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">tidy_linelist</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">value</span>, y <span class="op">=</span> <span class="va">case_name</span><span class="op">)</span>,</span>
<span>    linewidth <span class="op">=</span> <span class="fl">0.25</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">value</span>,</span>
<span>      y <span class="op">=</span> <span class="va">case_name</span>,</span>
<span>      shape <span class="op">=</span> <span class="va">name</span>,</span>
<span>      col <span class="op">=</span> <span class="va">name</span></span>
<span>    <span class="op">)</span>, size <span class="op">=</span> <span class="fl">2</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_date</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Event date"</span>, date_breaks <span class="op">=</span> <span class="st">"week"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_y_discrete</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Case name"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_color_brewer</a></span><span class="op">(</span></span>
<span>    palette <span class="op">=</span> <span class="st">"Set1"</span>,</span>
<span>    name <span class="op">=</span> <span class="st">"Event type"</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Date Admission"</span>, <span class="st">"Date Onset"</span>, <span class="st">"Date Outcome"</span>, <span class="st">"Date Reporting"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_shape_manual</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"Event type"</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"Date Admission"</span>, <span class="st">"Date Onset"</span>, <span class="st">"Date Outcome"</span>, <span class="st">"Date Reporting"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>, <span class="fl">16</span>, <span class="fl">17</span>, <span class="fl">18</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span>, axis.text.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 1519 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_line()`).</span></span>
<span><span class="co">#&gt; Warning: Removed 1519 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_point()`).</span></span></code></pre></div>
<p><img src="reporting-delays-truncation_files/figure-html/plot-linelist-events-1.png" alt="A dot plot with the event dates in the line list plotted a points on the figure, connected by horizontal lines. One row in the dot plot corresponds to one case (i.e. one row in the line list). The y-axis label is 'Case name', and the x-axis label is 'Event date'. The event types are 'Date admission' (red square), 'Date Onset' (blue circle), 'Date Outcome' (green triangle), and 'Date Reporting' (purple diamond). The plot shows the distribution of delay times between each event for each individual in the line list, with the y-axis order by earliest date of symptom onset at the bottom." width="768"></p>
<p>If we plot the difference between the date of symptom onset and
reporting then, as expected, the distribution is roughly lognormally
distributed.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">linelist</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">date_reporting</span> <span class="op">-</span> <span class="va">date_onset</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    binwidth <span class="op">=</span> <span class="fl">2</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>      <span class="st">"Reporting delay ("</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">date_reporting</span> <span class="op">-</span> <span class="va">linelist</span><span class="op">$</span><span class="va">date_onset</span>, <span class="st">"units"</span><span class="op">)</span>,</span>
<span>      <span class="st">")"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.title.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="reporting-delays-truncation_files/figure-html/plot-variable-reporting-delay-1.png" alt="The distribution of reporting delays from a line list plotted as a histogram. The y-axis is the count, and the x-axis is the reporting delay in days. Most of the histogram weight is around 5 and there a tail to the distribution (left-skewed) with a small number of values above 40. The histogram looks approximately lognormally distributed." width="768"></p>
<p>If instead of a variable reporting delay you want to simulate a fixed
reporting delay, for example, the date of reporting is always 5 days
after the date of symptom onset, then a different function can be
supplied. One option is to set the parameter that controls the variance
of the probability distribution to zero (in the case of the lognormal
distribution, setting <code>sdlog = 0</code>), but a simpler and more
readable option would be to give a number generating function that
always returned 5.</p>
<p>We once again simulate to produce a line list with a fixed reporting
delay.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_linelist.html">sim_linelist</a></span><span class="op">(</span></span>
<span>  contact_distribution <span class="op">=</span> <span class="va">contact_distribution</span>,</span>
<span>  infectious_period <span class="op">=</span> <span class="va">infectious_period</span>,</span>
<span>  prob_infection <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  onset_to_hosp <span class="op">=</span> <span class="va">onset_to_hosp</span>,</span>
<span>  onset_to_death <span class="op">=</span> <span class="va">onset_to_death</span>,</span>
<span>  reporting_delay <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">5</span>, times <span class="op">=</span> <span class="va">x</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id          case_name case_type sex age date_onset date_reporting</span></span>
<span><span class="co">#&gt; 1  1       Caleb Froome confirmed   m  47 2023-01-01     2023-01-06</span></span>
<span><span class="co">#&gt; 2  2    Zubair el-Kalil  probable   m  41 2023-01-07     2023-01-12</span></span>
<span><span class="co">#&gt; 3  3   Cameron Williams  probable   m  79 2023-01-09     2023-01-14</span></span>
<span><span class="co">#&gt; 4  4      Aiyana Garcia confirmed   f  70 2023-01-10     2023-01-15</span></span>
<span><span class="co">#&gt; 5  6 Miguel Line-Torres suspected   m  50 2023-01-10     2023-01-15</span></span>
<span><span class="co">#&gt; 6  7       Teagan Dixon confirmed   f  80 2023-01-10     2023-01-15</span></span>
<span><span class="co">#&gt;   date_admission   outcome date_outcome date_first_contact date_last_contact</span></span>
<span><span class="co">#&gt; 1     2023-01-05      died   2023-01-26               &lt;NA&gt;              &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2           &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-26        2023-01-02</span></span>
<span><span class="co">#&gt; 3           &lt;NA&gt; recovered         &lt;NA&gt;         2023-01-03        2023-01-11</span></span>
<span><span class="co">#&gt; 4           &lt;NA&gt; recovered         &lt;NA&gt;         2023-01-03        2023-01-10</span></span>
<span><span class="co">#&gt; 5           &lt;NA&gt; recovered         &lt;NA&gt;         2023-01-07        2023-01-11</span></span>
<span><span class="co">#&gt; 6     2023-01-13      died   2023-01-30         2023-01-05        2023-01-10</span></span>
<span><span class="co">#&gt;   ct_value</span></span>
<span><span class="co">#&gt; 1     23.6</span></span>
<span><span class="co">#&gt; 2       NA</span></span>
<span><span class="co">#&gt; 3       NA</span></span>
<span><span class="co">#&gt; 4     28.2</span></span>
<span><span class="co">#&gt; 5       NA</span></span>
<span><span class="co">#&gt; 6     26.9</span></span>
<span><span class="va">linelist</span><span class="op">$</span><span class="va">date_reporting</span> <span class="op">-</span> <span class="va">linelist</span><span class="op">$</span><span class="va">date_onset</span></span>
<span><span class="co">#&gt; Time differences in days</span></span>
<span><span class="co">#&gt;   [1] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span><span class="co">#&gt;  [38] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span><span class="co">#&gt;  [75] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span><span class="co">#&gt; [112] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span><span class="co">#&gt; [149] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span><span class="co">#&gt; [186] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span><span class="co">#&gt; [223] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span><span class="co">#&gt; [260] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span><span class="co">#&gt; [297] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span><span class="co">#&gt; [334] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span><span class="co">#&gt; [371] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span><span class="co">#&gt; [408] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span><span class="co">#&gt; [445] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span><span class="co">#&gt; [482] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span><span class="co">#&gt; [519] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="truncation">Truncation<a class="anchor" aria-label="anchor" href="#truncation"></a>
</h2>
<p>Right truncation in infectious disease data occurs when only
individuals who have experienced a specific event by a certain time can
be included in the linelist. This leads to an underestimate of recent
cases or death, and is especially relevant for ongoing outbreaks where
recent cases might not have been recorded. It can also happen if cases
are no longer recorded after a certain point in time.</p>
<p>Right-truncated outbreak data, in particular line list data, can give
the impression that the incidence is decreasing
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi><annotation encoding="application/x-tex">R</annotation></semantics></math>
&lt; 1), however this can be an artefact resulting from the fact the
data is right-truncated, and the outbreak can be stable or growing.</p>
<p>By default {simulist} simulates an outbreak from start to finish.
Therefore, the line list or contact data contain all cases and outcomes.
In order to get data that is more representative of ongoing outbreak
dynamics where recent cases are not yet recorded and may be revised
upwards in the future the <code><a href="../reference/truncate_linelist.html">truncate_linelist()</a></code> function can
be applied.</p>
<p>Re-simulating a simple line list using <code><a href="../reference/sim_linelist.html">sim_linelist()</a></code>
with a lognormal reporting delay with <code>meanlog = 2</code> and
<code>sdlog = 0.5</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set seed to produce small line list</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_linelist.html">sim_linelist</a></span><span class="op">(</span></span>
<span>  contact_distribution <span class="op">=</span> <span class="va">contact_distribution</span>,</span>
<span>  infectious_period <span class="op">=</span> <span class="va">infectious_period</span>,</span>
<span>  prob_infection <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  onset_to_hosp <span class="op">=</span> <span class="va">onset_to_hosp</span>,</span>
<span>  onset_to_death <span class="op">=</span> <span class="va">onset_to_death</span>,</span>
<span>  reporting_delay <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/Lognormal.html" class="external-link">rlnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">x</span>, meanlog <span class="op">=</span> <span class="fl">2</span>, sdlog <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># first 6 rows of linelist</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id          case_name case_type sex age date_onset date_reporting</span></span>
<span><span class="co">#&gt; 1  1 Daiveante Labarrie confirmed   m  59 2023-01-01     2023-01-05</span></span>
<span><span class="co">#&gt; 2  2       Phayd Garcia confirmed   m   3 2023-01-07     2023-01-13</span></span>
<span><span class="co">#&gt; 3  3  Jenifer Castaneda suspected   f  53 2023-01-01     2023-01-07</span></span>
<span><span class="co">#&gt; 4  8      Asya Woolfolk confirmed   f  42 2023-01-14     2023-01-25</span></span>
<span><span class="co">#&gt; 5  9 Amaani el-Abdullah  probable   f  73 2023-01-03     2023-01-08</span></span>
<span><span class="co">#&gt; 6 10       Bella Nguyen confirmed   f  89 2023-01-03     2023-01-11</span></span>
<span><span class="co">#&gt;   date_admission   outcome date_outcome date_first_contact date_last_contact</span></span>
<span><span class="co">#&gt; 1     2023-01-05 recovered         &lt;NA&gt;               &lt;NA&gt;              &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2           &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-27        2023-01-06</span></span>
<span><span class="co">#&gt; 3           &lt;NA&gt; recovered         &lt;NA&gt;         2023-01-01        2023-01-04</span></span>
<span><span class="co">#&gt; 4           &lt;NA&gt; recovered         &lt;NA&gt;         2023-01-07        2023-01-11</span></span>
<span><span class="co">#&gt; 5           &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-25        2023-01-04</span></span>
<span><span class="co">#&gt; 6           &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-30        2023-01-02</span></span>
<span><span class="co">#&gt;   ct_value</span></span>
<span><span class="co">#&gt; 1     22.3</span></span>
<span><span class="co">#&gt; 2     27.4</span></span>
<span><span class="co">#&gt; 3       NA</span></span>
<span><span class="co">#&gt; 4     28.0</span></span>
<span><span class="co">#&gt; 5       NA</span></span>
<span><span class="co">#&gt; 6     26.9</span></span></code></pre></div>
<p>The <em>truncation time</em> is the time/date at which we want to
take a snapshot of the line list and see what it would have looked like
on that day (i.e. real-time during the outbreak). By default
<code><a href="../reference/truncate_linelist.html">truncate_linelist()</a></code> will truncate from 14 days before the
end of the outbreak (defined as the maximum date in the line list).</p>
<div class="alert alert-primary">
<p>Here we define the time between the latest, or user-specified date,
and the time point at which data is truncated as the <em>truncation
point</em>.</p>
<p>In the plot below we show the <em>truncation time</em> as a vertical
line. If the date of reporting falls after the truncation time, then the
case is removed from the line list, if it falls before the date of
reporting but after the hospital admission and/or outcome date they are
set to <code>NA</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tidy_linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"date_onset"</span>, <span class="st">"date_reporting"</span>, <span class="st">"date_admission"</span>, <span class="st">"date_outcome"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>ordering_value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">name</span> <span class="op">==</span> <span class="st">"date_onset"</span>, <span class="va">value</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co"># nolint consecutive_mutate_linter</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>case_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html" class="external-link">reorder</a></span><span class="op">(</span><span class="va">case_name</span>, <span class="va">ordering_value</span>, <span class="va">min</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="co"># nolint consecutive_mutate_linter</span></span>
<span></span>
<span><span class="va">truncation_day</span> <span class="op">&lt;-</span> <span class="fl">14</span></span>
<span><span class="va">trunc_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">tidy_linelist</span><span class="op">$</span><span class="va">value</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">-</span> <span class="va">truncation_day</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">tidy_linelist</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">value</span>, y <span class="op">=</span> <span class="va">case_name</span><span class="op">)</span>,</span>
<span>    linewidth <span class="op">=</span> <span class="fl">0.25</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">value</span>,</span>
<span>      y <span class="op">=</span> <span class="va">case_name</span>,</span>
<span>      shape <span class="op">=</span> <span class="va">name</span>,</span>
<span>      col <span class="op">=</span> <span class="va">name</span></span>
<span>    <span class="op">)</span>,</span>
<span>    size <span class="op">=</span> <span class="fl">2</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">trunc_date</span>, linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_date</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Event date"</span>, date_breaks <span class="op">=</span> <span class="st">"2 week"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_y_discrete</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Case name"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_color_brewer</a></span><span class="op">(</span></span>
<span>    palette <span class="op">=</span> <span class="st">"Set1"</span>,</span>
<span>    name <span class="op">=</span> <span class="st">"Event type"</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Date Admission"</span>, <span class="st">"Date Onset"</span>, <span class="st">"Date Outcome"</span>, <span class="st">"Date Reporting"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_shape_manual</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"Event type"</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"Date Admission"</span>, <span class="st">"Date Onset"</span>, <span class="st">"Date Outcome"</span>, <span class="st">"Date Reporting"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>, <span class="fl">16</span>, <span class="fl">17</span>, <span class="fl">18</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span>, axis.text.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 22 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_line()`).</span></span>
<span><span class="co">#&gt; Warning: Removed 22 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_point()`).</span></span></code></pre></div>
<p><img src="reporting-delays-truncation_files/figure-html/plot-linelist-events-trunc-1.png" alt="A dot plot with the event dates in the line list plotted a points on the figure, connected by horizontal lines. One row in the dot plot corresponds to one case (i.e. one row in the line list). The y-axis label is 'Case name', and the x-axis label is 'Event date'. The event types are 'Date admission' (red square), 'Date Onset' (blue circle), 'Date Outcome' (green triangle), and 'Date Reporting' (purple diamond). The plot shows the distribution of delay times between each event for each individual in the line list, with the y-axis order by earliest date of symptom onset at the bottom. There is a vertical dashed line showing when the truncation day is." width="768"></p>
<p>In this example several cases are removed as the reporting date
occurs after the truncation time.</p>
</div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist_trunc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/truncate_linelist.html">truncate_linelist</a></span><span class="op">(</span>linelist <span class="op">=</span> <span class="va">linelist</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="../reference/truncate_linelist.html">truncate_linelist()</a></code> assumes the event which is pertinent
to the truncation of the data is the date of reporting
(<code>$date_reporting</code>), as this is likely the date the case was
first input into the line list, even if this date is before the date of
hospital admission (<code>$date_admission</code>) or date of outcome
(<code>$date_outcome</code>).</p>
<p>Right-truncating line list date using {simulist} removes individuals
(rows) when the sampled truncation time is less recent than the
reporting date. For cases where the rows are kept because the truncation
time is more recent than the truncation event, but there are subsequent
events, such as date of hospitalisation, that are more recent than the
truncation time, these events dates are set to <code>NA</code>. The
reasoning being that these events are assumed to have not been reported
yet.</p>
<p>The <code><a href="../reference/truncate_linelist.html">truncate_linelist()</a></code> function can also be used to
reflect if the reporting of cases during an outbreak stopped on a given
date.</p>
<p>It is also possible to specify the <em>truncation time</em> as the
number of days, weeks, months or years since the start of the outbreak.
Here we right-truncate the line list 3 months since the start of the
outbreak.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist_trunc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/truncate_linelist.html">truncate_linelist</a></span><span class="op">(</span></span>
<span>  linelist <span class="op">=</span> <span class="va">linelist</span>,</span>
<span>  truncation_day <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  unit <span class="op">=</span> <span class="st">"months"</span>,</span>
<span>  direction <span class="op">=</span> <span class="st">"forward"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="truncate-to-emulate-different-stages-of-outbreak">Truncate to emulate different stages of outbreak<a class="anchor" aria-label="anchor" href="#truncate-to-emulate-different-stages-of-outbreak"></a>
</h2>
<p>It is not possible to simulate a line list with
<code><a href="../reference/sim_linelist.html">sim_linelist()</a></code> that is mid-way through an outbreak<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;&lt;code&gt;&lt;a href="../reference/sim_linelist.html"&gt;sim_linelist()&lt;/a&gt;&lt;/code&gt; simulates an outbreak to
extinction except in cases where the number of infected individuals
exceeds the maximum outbreak size specified in the
&lt;code&gt;outbreak_size&lt;/code&gt; argument in &lt;code&gt;&lt;a href="../reference/sim_linelist.html"&gt;sim_linelist()&lt;/a&gt;&lt;/code&gt;,
which by default is 10^{4} where the line list returned is an ongoing
outbreak.&lt;/p&gt;'><sup>1</sup></a>. This can
make it difficult to generate outbreak data sets that resemble early
outbreak dynamics where incidence is increasing, or mid-outbreak, or
late in an outbreak as the disease approaches extinction. These types of
data sets are useful for testing outbreak analytics method that are
applied in real-time outbreak scenarios.</p>
<p>The <code><a href="../reference/truncate_linelist.html">truncate_linelist()</a></code> function enables converting a
complete line list from <code><a href="../reference/sim_linelist.html">sim_linelist()</a></code> into a
within-outbreak line list.</p>
<p>We can simulate another outbreak, this time with more cases, and plot
the complete line list by aggregating to daily incidence using the
{incidence2} package.</p>
<div class="alert alert-info">
<p>For a full overview of how to visualise outbreak data simulated with
{simulist} see the <a href="vis-linelist.html">Visualising simulated
data</a> vignette.</p>
</div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set seed to produce single wave outbreak</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_linelist.html">sim_linelist</a></span><span class="op">(</span></span>
<span>  contact_distribution <span class="op">=</span> <span class="va">contact_distribution</span>,</span>
<span>  infectious_period <span class="op">=</span> <span class="va">infectious_period</span>,</span>
<span>  prob_infection <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  onset_to_hosp <span class="op">=</span> <span class="va">onset_to_hosp</span>,</span>
<span>  onset_to_death <span class="op">=</span> <span class="va">onset_to_death</span>,</span>
<span>  outbreak_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">5000</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create incidence object</span></span>
<span><span class="va">weekly_inci</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/incidence2/man/incidence.html" class="external-link">incidence</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">linelist</span>,</span>
<span>  date_index <span class="op">=</span> <span class="st">"date_onset"</span>,</span>
<span>  interval <span class="op">=</span> <span class="st">"epiweek"</span>,</span>
<span>  complete_dates <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">weekly_inci</span><span class="op">)</span></span></code></pre></div>
<p><img src="reporting-delays-truncation_files/figure-html/sim-linelist-plot-incidence-1.png" alt="An incidence curve (epicurve) of cases from symptom onset aggregated by week. The y-axis is the count, the x-axis is the date index. The weekly incidence increases from week 1 to week 6, then it gradually declines." width="768"></p>
<p>By looking at the outbreak, we can pick three points to truncate: 1)
early in the outbreak when the epicurve is growing (1st February 2023,
epiweek 5), 2) in the middle of the outbreak (15th March 2023, epiweek
11), and 3) late in the outbreak when the number of cases is declining
and the end of the outbreak is near (1st May 2023, epiweek 18).</p>
<p>We can specify a <code>&lt;Date&gt;</code> object to the
<code>truncation_day</code> argument in <code><a href="../reference/truncate_linelist.html">truncate_linelist()</a></code>
to specify the date we want to apply the right truncation to.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist_early</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/truncate_linelist.html">truncate_linelist</a></span><span class="op">(</span></span>
<span>  linelist <span class="op">=</span> <span class="va">linelist</span>,</span>
<span>  truncation_day <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2023-02-01"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">inci_early</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/incidence2/man/incidence.html" class="external-link">incidence</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">linelist_early</span>,</span>
<span>  date_index <span class="op">=</span> <span class="st">"date_onset"</span>,</span>
<span>  interval <span class="op">=</span> <span class="st">"epiweek"</span>,</span>
<span>  complete_dates <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">linelist_mid</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/truncate_linelist.html">truncate_linelist</a></span><span class="op">(</span></span>
<span>  linelist <span class="op">=</span> <span class="va">linelist</span>,</span>
<span>  truncation_day <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2023-03-15"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">inci_mid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/incidence2/man/incidence.html" class="external-link">incidence</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">linelist_mid</span>,</span>
<span>  date_index <span class="op">=</span> <span class="st">"date_onset"</span>,</span>
<span>  interval <span class="op">=</span> <span class="st">"epiweek"</span>,</span>
<span>  complete_dates <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">linelist_late</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/truncate_linelist.html">truncate_linelist</a></span><span class="op">(</span></span>
<span>  linelist <span class="op">=</span> <span class="va">linelist</span>,</span>
<span>  truncation_day <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2023-05-01"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">inci_late</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/incidence2/man/incidence.html" class="external-link">incidence</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">linelist_late</span>,</span>
<span>  date_index <span class="op">=</span> <span class="st">"date_onset"</span>,</span>
<span>  interval <span class="op">=</span> <span class="st">"epiweek"</span>,</span>
<span>  complete_dates <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Next we repeat this procedure of creating data sets for early, mid,
and late in the outbreak. For this example we will use a reporting delay
to illustrate the issue of under-reporting of recent cases when there is
a time delay between symptom onset and reporting.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set seed to produce single wave outbreak</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_linelist.html">sim_linelist</a></span><span class="op">(</span></span>
<span>  contact_distribution <span class="op">=</span> <span class="va">contact_distribution</span>,</span>
<span>  infectious_period <span class="op">=</span> <span class="va">infectious_period</span>,</span>
<span>  prob_infection <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  onset_to_hosp <span class="op">=</span> <span class="va">onset_to_hosp</span>,</span>
<span>  onset_to_death <span class="op">=</span> <span class="va">onset_to_death</span>,</span>
<span>  reporting_delay <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/Lognormal.html" class="external-link">rlnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">x</span>, meanlog <span class="op">=</span> <span class="fl">2</span>, sdlog <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>  outbreak_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">5000</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist_early</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/truncate_linelist.html">truncate_linelist</a></span><span class="op">(</span></span>
<span>  linelist <span class="op">=</span> <span class="va">linelist</span>,</span>
<span>  truncation_day <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2023-02-01"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">inci_early</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/incidence2/man/incidence.html" class="external-link">incidence</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">linelist_early</span>,</span>
<span>  date_index <span class="op">=</span> <span class="st">"date_onset"</span>,</span>
<span>  interval <span class="op">=</span> <span class="st">"epiweek"</span>,</span>
<span>  complete_dates <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">linelist_mid</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/truncate_linelist.html">truncate_linelist</a></span><span class="op">(</span></span>
<span>  linelist <span class="op">=</span> <span class="va">linelist</span>,</span>
<span>  truncation_day <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2023-03-15"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">inci_mid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/incidence2/man/incidence.html" class="external-link">incidence</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">linelist_mid</span>,</span>
<span>  date_index <span class="op">=</span> <span class="st">"date_onset"</span>,</span>
<span>  interval <span class="op">=</span> <span class="st">"epiweek"</span>,</span>
<span>  complete_dates <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">linelist_late</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/truncate_linelist.html">truncate_linelist</a></span><span class="op">(</span></span>
<span>  linelist <span class="op">=</span> <span class="va">linelist</span>,</span>
<span>  truncation_day <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2023-05-01"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">inci_late</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/incidence2/man/incidence.html" class="external-link">incidence</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">linelist_late</span>,</span>
<span>  date_index <span class="op">=</span> <span class="st">"date_onset"</span>,</span>
<span>  interval <span class="op">=</span> <span class="st">"epiweek"</span>,</span>
<span>  complete_dates <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">inci_early</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Early"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">25</span>, hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">inci_mid</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Mid"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">25</span>, hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">inci_late</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Late"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">25</span>, hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="reporting-delays-truncation_files/figure-html/plot-trunc-stages-reporting-delay-1.png" alt="Three incidence curves (epicurves) in a single row, the left plot is the outbreak snapshot early in the outbreak, the middle plot is the outbreak and the right plot is the end of the outbreak. The cases are aggregated by week. The y-axis is the count, the x-axis is the date index. This plot shows fewer cases in the days before the truncation day due to right-truncation of the reporting delay." width="30%"><img src="reporting-delays-truncation_files/figure-html/plot-trunc-stages-reporting-delay-2.png" alt="Three incidence curves (epicurves) in a single row, the left plot is the outbreak snapshot early in the outbreak, the middle plot is the outbreak and the right plot is the end of the outbreak. The cases are aggregated by week. The y-axis is the count, the x-axis is the date index. This plot shows fewer cases in the days before the truncation day due to right-truncation of the reporting delay." width="30%"><img src="reporting-delays-truncation_files/figure-html/plot-trunc-stages-reporting-delay-3.png" alt="Three incidence curves (epicurves) in a single row, the left plot is the outbreak snapshot early in the outbreak, the middle plot is the outbreak and the right plot is the end of the outbreak. The cases are aggregated by week. The y-axis is the count, the x-axis is the date index. This plot shows fewer cases in the days before the truncation day due to right-truncation of the reporting delay." width="30%"></p>
<p>Comparing the two sets of the three plots you can see how in the
latter applying right truncation gives the impression that cases are
declining.</p>
<p>These truncated line lists can be used to test methods that estimate
the real-time reproduction number such as <a href="https://epiforecasts.io/EpiNow2/" class="external-link">{EpiNow2}</a> or <a href="https://package.epinowcast.org/" class="external-link">{epinowcast}</a>.</p>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Joshua W. Lambert, Carmen Tamayo Cuartero.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3. Theme provided by <a href="https://github.com/epiverse-trace/epiversetheme" class="external-link">epiversetheme</a> 0.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
