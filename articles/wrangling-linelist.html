<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Wrangling simulated outbreak data • simulist</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Wrangling simulated outbreak data">
<!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XZ471458FQ');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">
    <a href="https://epiverse-trace.github.io/" class="external-link"><img src="https://epiverse-trace.github.io/blueprints/logo_white.svg" id="logo" alt="Epiverse-TRACE"></a>
    <a class="navbar-brand me-2" href="../index.html">simulist</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.6.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/simulist.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Customising simulated outbreak</h6></li>
    <li><a class="dropdown-item" href="../articles/age-strat-risks.html">Age-stratified hospitalisation and death risks</a></li>
    <li><a class="dropdown-item" href="../articles/age-struct-pop.html">Age-structured population</a></li>
    <li><a class="dropdown-item" href="../articles/time-varying-cfr.html">Time-varying case fatality risk</a></li>
    <li><a class="dropdown-item" href="../articles/reporting-delays-truncation.html">Reporting delays and right-truncation of line list data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Wrangling and plotting data</h6></li>
    <li><a class="dropdown-item" href="../articles/wrangling-linelist.html">Wrangling simulated outbreak data</a></li>
    <li><a class="dropdown-item" href="../articles/vis-linelist.html">Visualising simulated data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Developer Documentation</h6></li>
    <li><a class="dropdown-item" href="../articles/design-principles.html">Design Principles for {simulist}</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epiverse-trace/simulist/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="wrangling-linelist_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="wrangling-linelist_files/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="wrangling-linelist_files/vis-9.1.0/vis-network.min.js"></script><script src="wrangling-linelist_files/visNetwork-binding-2.1.2/visNetwork.js"></script><link href="wrangling-linelist_files/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Wrangling simulated outbreak data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/simulist/blob/main/vignettes/wrangling-linelist.Rmd" class="external-link"><code>vignettes/wrangling-linelist.Rmd</code></a></small>
      <div class="d-none name"><code>wrangling-linelist.Rmd</code></div>
    </div>

    
    
<p>The {simulist} R package can generate line list data
(<code><a href="../reference/sim_linelist.html">sim_linelist()</a></code>), contact tracing data
(<code><a href="../reference/sim_contacts.html">sim_contacts()</a></code>), or both (<code><a href="../reference/sim_outbreak.html">sim_outbreak()</a></code>). By
default the line list produced by <code><a href="../reference/sim_linelist.html">sim_linelist()</a></code> and
<code><a href="../reference/sim_outbreak.html">sim_outbreak()</a></code> contains 12 columns. Some amount of
post-simulation data wrangling may be needed to use the simulated
epidemiological case data to certain applications. This vignette
demonstrates some common data wrangling tasks that may be performed on
simulated line list or contact tracing data.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/epiverse-trace/simulist" class="external-link">simulist</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/epiverse-trace/epiparameter/" class="external-link">epiparameter</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.repidemicsconsortium.org/epicontacts/" class="external-link">epicontacts</a></span><span class="op">)</span></span></code></pre></div>
<p>This vignette provides data wrangling examples using both functions
available in the R language (commonly called “base R”) as well as using
<a href="https://www.tidyverse.org/" class="external-link">tidyverse R packages</a>, which are
commonly applied to data science tasks in R. The tidyverse examples are
shown by default, but select the “Base R” tab to see the equivalent
functionality using base R. There are many other tools for wrangling
data in R which are not covered by this vignette (e.g. <a href="https://rdatatable.gitlab.io/data.table/" class="external-link">{data.table}</a>).</p>
<div class="alert alert-info">
<p>See these great resources for more information on general data
wrangling in R:</p>
<ul>
<li><a href="https://r4ds.hadley.nz/" class="external-link">R for Data Science by Hadley
Wickham, Mine Çetinkaya-Rundel, and Garrett Grolemund</a></li>
<li><a href="https://dplyr.tidyverse.org/" class="external-link">{dplyr} R package</a></li>
<li><a href="https://github.com/tidyverse/tidyr" class="external-link">{tidyr} R
package</a></li>
<li><a href="https://intro2r.com/wrangling-data-frames.html" class="external-link">Wrangling
data frames chapter in An Introduction to R by Alex Douglas, Deon Roos,
Francesca Mancini, Ana Couto &amp; David Lusseau</a></li>
</ul>
</div>
<div class="section level2">
<h2 id="simulate-an-outbreak">Simulate an outbreak<a class="anchor" aria-label="anchor" href="#simulate-an-outbreak"></a>
</h2>
<p>To simulate an outbreak we will use the <code><a href="../reference/sim_outbreak.html">sim_outbreak()</a></code>
function from the {simulist} R package.</p>
<div class="alert alert-info">
<p>If you are unfamiliar with the {simulist} package or the
<code><a href="../reference/sim_outbreak.html">sim_outbreak()</a></code> function <a href="simulist.html">Get Started
vignette</a> is a great place to start.</p>
</div>
<p>First we load in some data that is required for the outbreak
simulation. Data on epidemiological parameters and distributions are
read from the {epiparameter} R package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create contact distribution (not available from {epiparameter} database)</span></span>
<span><span class="va">contact_distribution</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://epiverse-trace.github.io/epiparameter/reference/epiparameter.html" class="external-link">epiparameter</a></span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"COVID-19"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"contact distribution"</span>,</span>
<span>  prob_distribution <span class="op">=</span> <span class="fu"><a href="https://epiverse-trace.github.io/epiparameter/reference/create_prob_distribution.html" class="external-link">create_prob_distribution</a></span><span class="op">(</span></span>
<span>    prob_distribution <span class="op">=</span> <span class="st">"pois"</span>,</span>
<span>    prob_distribution_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Citation cannot be created as author, year, journal or title is missing</span></span>
<span></span>
<span><span class="co"># create infectious period (not available from {epiparameter} database)</span></span>
<span><span class="va">infectious_period</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://epiverse-trace.github.io/epiparameter/reference/epiparameter.html" class="external-link">epiparameter</a></span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"COVID-19"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"infectious period"</span>,</span>
<span>  prob_distribution <span class="op">=</span> <span class="fu"><a href="https://epiverse-trace.github.io/epiparameter/reference/create_prob_distribution.html" class="external-link">create_prob_distribution</a></span><span class="op">(</span></span>
<span>    prob_distribution <span class="op">=</span> <span class="st">"gamma"</span>,</span>
<span>    prob_distribution_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="fl">1</span>, scale <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Citation cannot be created as author, year, journal or title is missing</span></span>
<span></span>
<span><span class="co"># get onset to hospital admission from {epiparameter} database</span></span>
<span><span class="va">onset_to_hosp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://epiverse-trace.github.io/epiparameter/reference/epiparameter_db.html" class="external-link">epiparameter_db</a></span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"COVID-19"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"onset to hospitalisation"</span>,</span>
<span>  single_epiparameter <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Using Linton N, Kobayashi T, Yang Y, Hayashi K, Akhmetzhanov A, Jung S, Yuan</span></span>
<span><span class="co">#&gt; B, Kinoshita R, Nishiura H (2020). "Incubation Period and Other</span></span>
<span><span class="co">#&gt; Epidemiological Characteristics of 2019 Novel Coronavirus Infections</span></span>
<span><span class="co">#&gt; with Right Truncation: A Statistical Analysis of Publicly Available</span></span>
<span><span class="co">#&gt; Case Data." _Journal of Clinical Medicine_. doi:10.3390/jcm9020538</span></span>
<span><span class="co">#&gt; &lt;https://doi.org/10.3390/jcm9020538&gt;.. </span></span>
<span><span class="co">#&gt; To retrieve the citation use the 'get_citation' function</span></span>
<span></span>
<span><span class="co"># get onset to death from {epiparameter} database</span></span>
<span><span class="va">onset_to_death</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://epiverse-trace.github.io/epiparameter/reference/epiparameter_db.html" class="external-link">epiparameter_db</a></span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"COVID-19"</span>,</span>
<span>  epi_name <span class="op">=</span> <span class="st">"onset to death"</span>,</span>
<span>  single_epiparameter <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Using Linton N, Kobayashi T, Yang Y, Hayashi K, Akhmetzhanov A, Jung S, Yuan</span></span>
<span><span class="co">#&gt; B, Kinoshita R, Nishiura H (2020). "Incubation Period and Other</span></span>
<span><span class="co">#&gt; Epidemiological Characteristics of 2019 Novel Coronavirus Infections</span></span>
<span><span class="co">#&gt; with Right Truncation: A Statistical Analysis of Publicly Available</span></span>
<span><span class="co">#&gt; Case Data." _Journal of Clinical Medicine_. doi:10.3390/jcm9020538</span></span>
<span><span class="co">#&gt; &lt;https://doi.org/10.3390/jcm9020538&gt;.. </span></span>
<span><span class="co">#&gt; To retrieve the citation use the 'get_citation' function</span></span></code></pre></div>
<p>The seed is set to ensure the output of the vignette is consistent.
When using {simulist}, setting the seed is not required unless you need
to simulate the same line list multiple times.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outbreak</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_outbreak.html">sim_outbreak</a></span><span class="op">(</span></span>
<span>  contact_distribution <span class="op">=</span> <span class="va">contact_distribution</span>,</span>
<span>  infectious_period <span class="op">=</span> <span class="va">infectious_period</span>,</span>
<span>  prob_infection <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  onset_to_hosp <span class="op">=</span> <span class="va">onset_to_hosp</span>,</span>
<span>  onset_to_death <span class="op">=</span> <span class="va">onset_to_death</span></span>
<span><span class="op">)</span></span>
<span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">outbreak</span><span class="op">$</span><span class="va">linelist</span></span>
<span><span class="va">contacts</span> <span class="op">&lt;-</span> <span class="va">outbreak</span><span class="op">$</span><span class="va">contacts</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="censoring-dates">Censoring dates<a class="anchor" aria-label="anchor" href="#censoring-dates"></a>
</h2>
<p>The date event columns in simulated line lists are stored to double
point precision, meaning they are the exact event times. It is unusual
to not store <code>&lt;Date&gt;</code> objects as integers, as explained
in <code><a href="https://rdrr.io/r/base/Dates.html" class="external-link">?Dates</a></code>, and the <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> function for
<code>&lt;Date&gt;</code>s does not show that they may be part way
through a day.</p>
<p>Here we show this by printing the date of symptom onset for the
simulated data, and then unclass it to show how it is stored
internally.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span><span class="op">$</span><span class="va">date_onset</span></span>
<span><span class="co">#&gt;  [1] "2023-01-01" "2023-01-01" "2023-01-01" "2023-01-01" "2023-01-02"</span></span>
<span><span class="co">#&gt;  [6] "2023-01-01" "2023-01-01" "2023-01-01" "2023-01-01" "2023-01-01"</span></span>
<span><span class="co">#&gt; [11] "2023-01-02" "2023-01-02" "2023-01-02"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">date_onset</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] 19358.00 19358.24 19358.04 19358.38 19359.16 19358.85 19358.14 19358.70</span></span>
<span><span class="co">#&gt;  [9] 19358.41 19358.97 19359.40 19359.47 19359.51</span></span></code></pre></div>
<p>The <code><a href="../reference/censor_linelist.html">censor_linelist()</a></code> function can be used after
<code><a href="../reference/sim_linelist.html">sim_linelist()</a></code> to censor the event dates to a given
precision. Here we show censoring the dates to daily and weekly
intervals. The daily censoring dates will look that same as before, but
the dates will have any value after the decimal point set to zero. The
weekly censored dates will be printed differently.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">daily_cens_linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/censor_linelist.html">censor_linelist</a></span><span class="op">(</span><span class="va">linelist</span>, interval <span class="op">=</span> <span class="st">"daily"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">daily_cens_linelist</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id             case_name case_type sex age date_onset date_reporting</span></span>
<span><span class="co">#&gt; 1  1         Fabian Mrazik confirmed   m  90 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 2  3       Ashley Martinez confirmed   f  71 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 3  4                Tia Vu  probable   f  48 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 4  5 Abdul Majeed el-Saleh confirmed   m  77 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 5  6        Courtney Flood suspected   f  83 2023-01-02     2023-01-02</span></span>
<span><span class="co">#&gt; 6  7          Joseph Jiron suspected   m  56 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt;   date_admission   outcome date_outcome date_first_contact date_last_contact</span></span>
<span><span class="co">#&gt; 1           &lt;NA&gt; recovered         &lt;NA&gt;               &lt;NA&gt;              &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2     2023-01-08      died   2023-01-10         2022-12-26        2023-01-06</span></span>
<span><span class="co">#&gt; 3           &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-30        2023-01-05</span></span>
<span><span class="co">#&gt; 4           &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-31        2023-01-08</span></span>
<span><span class="co">#&gt; 5           &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-26        2023-01-04</span></span>
<span><span class="co">#&gt; 6           &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-28        2023-01-03</span></span>
<span><span class="co">#&gt;   ct_value</span></span>
<span><span class="co">#&gt; 1     21.9</span></span>
<span><span class="co">#&gt; 2     22.7</span></span>
<span><span class="co">#&gt; 3       NA</span></span>
<span><span class="co">#&gt; 4     27.4</span></span>
<span><span class="co">#&gt; 5       NA</span></span>
<span><span class="co">#&gt; 6       NA</span></span>
<span></span>
<span><span class="va">weekly_cens_linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/censor_linelist.html">censor_linelist</a></span><span class="op">(</span><span class="va">linelist</span>, interval <span class="op">=</span> <span class="st">"weekly"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">weekly_cens_linelist</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id             case_name case_type sex age date_onset date_reporting</span></span>
<span><span class="co">#&gt; 1  1         Fabian Mrazik confirmed   m  90   2022-W52       2022-W52</span></span>
<span><span class="co">#&gt; 2  3       Ashley Martinez confirmed   f  71   2022-W52       2022-W52</span></span>
<span><span class="co">#&gt; 3  4                Tia Vu  probable   f  48   2022-W52       2022-W52</span></span>
<span><span class="co">#&gt; 4  5 Abdul Majeed el-Saleh confirmed   m  77   2022-W52       2022-W52</span></span>
<span><span class="co">#&gt; 5  6        Courtney Flood suspected   f  83   2023-W01       2023-W01</span></span>
<span><span class="co">#&gt; 6  7          Joseph Jiron suspected   m  56   2022-W52       2022-W52</span></span>
<span><span class="co">#&gt;   date_admission   outcome date_outcome date_first_contact date_last_contact</span></span>
<span><span class="co">#&gt; 1           &lt;NA&gt; recovered         &lt;NA&gt;               &lt;NA&gt;              &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2       2023-W01      died     2023-W02           2022-W52          2023-W01</span></span>
<span><span class="co">#&gt; 3           &lt;NA&gt; recovered         &lt;NA&gt;           2022-W52          2023-W01</span></span>
<span><span class="co">#&gt; 4           &lt;NA&gt; recovered         &lt;NA&gt;           2022-W52          2023-W01</span></span>
<span><span class="co">#&gt; 5           &lt;NA&gt; recovered         &lt;NA&gt;           2022-W52          2023-W01</span></span>
<span><span class="co">#&gt; 6           &lt;NA&gt; recovered         &lt;NA&gt;           2022-W52          2023-W01</span></span>
<span><span class="co">#&gt;   ct_value</span></span>
<span><span class="co">#&gt; 1     21.9</span></span>
<span><span class="co">#&gt; 2     22.7</span></span>
<span><span class="co">#&gt; 3       NA</span></span>
<span><span class="co">#&gt; 4     27.4</span></span>
<span><span class="co">#&gt; 5       NA</span></span>
<span><span class="co">#&gt; 6       NA</span></span></code></pre></div>
<p>See <code>?censor_linelist()</code> for more information on how to
use this function.</p>
<p>By using <code><a href="../reference/censor_linelist.html">censor_linelist()</a></code> it avoids common mistakes
when working with <code>&lt;Date&gt;</code> objects. For example,
rounding a date that is over half way through a day will mistakenly
result in the next day. Using <code><a href="../reference/censor_linelist.html">censor_linelist()</a></code> avoids this
and other common mistakes.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span><span class="op">$</span><span class="va">date_onset</span></span>
<span><span class="co">#&gt;  [1] "2023-01-01" "2023-01-01" "2023-01-01" "2023-01-01" "2023-01-02"</span></span>
<span><span class="co">#&gt;  [6] "2023-01-01" "2023-01-01" "2023-01-01" "2023-01-01" "2023-01-01"</span></span>
<span><span class="co">#&gt; [11] "2023-01-02" "2023-01-02" "2023-01-02"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">date_onset</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "2023-01-01" "2023-01-01" "2023-01-01" "2023-01-01" "2023-01-02"</span></span>
<span><span class="co">#&gt;  [6] "2023-01-02" "2023-01-01" "2023-01-02" "2023-01-01" "2023-01-02"</span></span>
<span><span class="co">#&gt; [11] "2023-01-02" "2023-01-02" "2023-01-03"</span></span>
<span><span class="va">daily_cens_linelist</span><span class="op">$</span><span class="va">date_onset</span></span>
<span><span class="co">#&gt;  [1] "2023-01-01" "2023-01-01" "2023-01-01" "2023-01-01" "2023-01-02"</span></span>
<span><span class="co">#&gt;  [6] "2023-01-01" "2023-01-01" "2023-01-01" "2023-01-01" "2023-01-01"</span></span>
<span><span class="co">#&gt; [11] "2023-01-02" "2023-01-02" "2023-01-02"</span></span></code></pre></div>
<p>The censored line list dates can be used with methods that account
for censoring when fitting delay distributions such as <a href="https://primarycensored.epinowcast.org/" class="external-link">{primarycensored}</a>.</p>
</div>
<div class="section level2 tabset">
<h2 class="tabset" id="under-reporting-of-cases-and-contacts">Under-reporting of cases and contacts<a class="anchor" aria-label="anchor" href="#under-reporting-of-cases-and-contacts"></a>
</h2>
<p>In this section we’ll show how case line lists and contact tracing
data sets can be subset to represent under-reporting, a common feature
of real-world outbreak data, especially in resource-limited
settings.</p>
<p>In the line list each case in unlinked (i.e. information on each row
is independent of information on every other row). This means we can
remove rows in the line list without having to augment any remaining
rows. We assume for this example that the probability of being reported,
and thus included in the line list, is independent on case type, sex,
age and the phase of the outbreak.</p>
<p>For this example we’ll assume the case reporting probability in the
line list is 50%.</p>


<ul class="nav nav-tabs" id="under-reporting-of-cases-and-contacts" role="tablist">
<li role="presentation" class="nav-item"><button data-bs-toggle="tab" data-bs-target="#tidyverse" id="tidyverse-tab" type="button" role="tab" aria-controls="tidyverse" aria-selected="true" class="active nav-link">Tidyverse</button></li>
<li role="presentation" class="nav-item"><button data-bs-toggle="tab" data-bs-target="#base-r" id="base-r-tab" type="button" role="tab" aria-controls="base-r" aria-selected="false" class="nav-link">Base R</button></li>
</ul>
<div class="tab-content">
<div class="active  tab-pane" id="tidyverse" role="tabpanel" aria-labelledby="tidyverse-tab">

<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/logical.html" class="external-link">as.logical</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">1</span>, prob <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id       case_name case_type sex age date_onset date_reporting date_admission</span></span>
<span><span class="co">#&gt; 1  1   Fabian Mrazik confirmed   m  90 2023-01-01     2023-01-01           &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2  3 Ashley Martinez confirmed   f  71 2023-01-01     2023-01-01     2023-01-08</span></span>
<span><span class="co">#&gt; 3  4          Tia Vu  probable   f  48 2023-01-01     2023-01-01           &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4  6  Courtney Flood suspected   f  83 2023-01-02     2023-01-02           &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5  7    Joseph Jiron suspected   m  56 2023-01-01     2023-01-01           &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6  8    Kevin Liddle suspected   m  39 2023-01-01     2023-01-01           &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 7 21   Katlyn Nelson  probable   f  36 2023-01-02     2023-01-02           &lt;NA&gt;</span></span>
<span><span class="co">#&gt;     outcome date_outcome date_first_contact date_last_contact ct_value</span></span>
<span><span class="co">#&gt; 1 recovered         &lt;NA&gt;               &lt;NA&gt;              &lt;NA&gt;     21.9</span></span>
<span><span class="co">#&gt; 2      died   2023-01-10         2022-12-26        2023-01-06     22.7</span></span>
<span><span class="co">#&gt; 3 recovered         &lt;NA&gt;         2022-12-30        2023-01-05       NA</span></span>
<span><span class="co">#&gt; 4 recovered         &lt;NA&gt;         2022-12-26        2023-01-04       NA</span></span>
<span><span class="co">#&gt; 5 recovered         &lt;NA&gt;         2022-12-28        2023-01-03       NA</span></span>
<span><span class="co">#&gt; 6 recovered         &lt;NA&gt;         2022-12-31        2023-01-03       NA</span></span>
<span><span class="co">#&gt; 7 recovered         &lt;NA&gt;         2023-01-01        2023-01-03       NA</span></span></code></pre></div>
</div>
<div class="tab-pane" id="base-r" role="tabpanel" aria-labelledby="base-r-tab">

<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">idx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/logical.html" class="external-link">as.logical</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">1</span>, prob <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">linelist</span><span class="op">[</span><span class="va">idx</span>, <span class="op">]</span></span>
<span><span class="co">#&gt;    id       case_name case_type sex age date_onset date_reporting</span></span>
<span><span class="co">#&gt; 2   3 Ashley Martinez confirmed   f  71 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 3   4          Tia Vu  probable   f  48 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 5   6  Courtney Flood suspected   f  83 2023-01-02     2023-01-02</span></span>
<span><span class="co">#&gt; 8   9 Rutaiba el-Raad confirmed   f  68 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 9  10 Jaime Middleton suspected   m   1 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 10 14     Emily Fyffe confirmed   f  16 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 12 21   Katlyn Nelson  probable   f  36 2023-01-02     2023-01-02</span></span>
<span><span class="co">#&gt; 13 24 Nicholas Rentie suspected   m  49 2023-01-02     2023-01-02</span></span>
<span><span class="co">#&gt;    date_admission   outcome date_outcome date_first_contact date_last_contact</span></span>
<span><span class="co">#&gt; 2      2023-01-08      died   2023-01-10         2022-12-26        2023-01-06</span></span>
<span><span class="co">#&gt; 3            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-30        2023-01-05</span></span>
<span><span class="co">#&gt; 5            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-26        2023-01-04</span></span>
<span><span class="co">#&gt; 8            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-29        2023-01-01</span></span>
<span><span class="co">#&gt; 9            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-26        2023-01-02</span></span>
<span><span class="co">#&gt; 10     2023-01-02 recovered         &lt;NA&gt;         2022-12-30        2023-01-02</span></span>
<span><span class="co">#&gt; 12           &lt;NA&gt; recovered         &lt;NA&gt;         2023-01-01        2023-01-03</span></span>
<span><span class="co">#&gt; 13           &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-28        2023-01-04</span></span>
<span><span class="co">#&gt;    ct_value</span></span>
<span><span class="co">#&gt; 2      22.7</span></span>
<span><span class="co">#&gt; 3        NA</span></span>
<span><span class="co">#&gt; 5        NA</span></span>
<span><span class="co">#&gt; 8      24.2</span></span>
<span><span class="co">#&gt; 9        NA</span></span>
<span><span class="co">#&gt; 10     21.3</span></span>
<span><span class="co">#&gt; 12       NA</span></span>
<span><span class="co">#&gt; 13       NA</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="section"></h2>
<p>The above example randomly sample rows in the line list using the
reporting probability resulting in different number of cases being kept
each time the code is run. To subset the line list data and get the same
number rows (i.e. cases) returned <code><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_sample()</a></code> can be
used instead.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_sample</a></span><span class="op">(</span>prop <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id             case_name case_type sex age date_onset date_reporting</span></span>
<span><span class="co">#&gt; 1  1         Fabian Mrazik confirmed   m  90 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 2  4                Tia Vu  probable   f  48 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 3  5 Abdul Majeed el-Saleh confirmed   m  77 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 4  6        Courtney Flood suspected   f  83 2023-01-02     2023-01-02</span></span>
<span><span class="co">#&gt; 5 21         Katlyn Nelson  probable   f  36 2023-01-02     2023-01-02</span></span>
<span><span class="co">#&gt; 6 24       Nicholas Rentie suspected   m  49 2023-01-02     2023-01-02</span></span>
<span><span class="co">#&gt;   date_admission   outcome date_outcome date_first_contact date_last_contact</span></span>
<span><span class="co">#&gt; 1           &lt;NA&gt; recovered         &lt;NA&gt;               &lt;NA&gt;              &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2           &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-30        2023-01-05</span></span>
<span><span class="co">#&gt; 3           &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-31        2023-01-08</span></span>
<span><span class="co">#&gt; 4           &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-26        2023-01-04</span></span>
<span><span class="co">#&gt; 5           &lt;NA&gt; recovered         &lt;NA&gt;         2023-01-01        2023-01-03</span></span>
<span><span class="co">#&gt; 6           &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-28        2023-01-04</span></span>
<span><span class="co">#&gt;   ct_value</span></span>
<span><span class="co">#&gt; 1     21.9</span></span>
<span><span class="co">#&gt; 2       NA</span></span>
<span><span class="co">#&gt; 3     27.4</span></span>
<span><span class="co">#&gt; 4       NA</span></span>
<span><span class="co">#&gt; 5       NA</span></span>
<span><span class="co">#&gt; 6       NA</span></span></code></pre></div>
<p><code><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_sample()</a></code> can reorder rows so we order by ID to
keep the cases in order of symptom onset date.</p>
<p>On to under-reporting in contact tracing data. Unlike line list data,
contact tracing data is linked. The direction of contact and possibly
transmission is recorded in the <code>$from</code> and <code>$to</code>
columns.</p>
<p>For this example we will assume that the contact tracing
under-reporting is applicable to infections and contacts that were not
infected. However, the same method could be applied for under-reporting
of the transmission chain by first subsetting to infections only (see
<code>vis-linelist.Rmd</code> vignette for example).</p>
<p>We plot the full contact network so it can be compared to the contact
networks with under-reporting plotted below.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">epicontacts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://www.repidemicsconsortium.org/epicontacts/reference/make_epicontacts.html" class="external-link">make_epicontacts</a></span><span class="op">(</span></span>
<span>  linelist <span class="op">=</span> <span class="va">linelist</span>,</span>
<span>  contacts <span class="op">=</span> <span class="va">contacts</span>,</span>
<span>  id <span class="op">=</span> <span class="st">"case_name"</span>,</span>
<span>  from <span class="op">=</span> <span class="st">"from"</span>,</span>
<span>  to <span class="op">=</span> <span class="st">"to"</span>,</span>
<span>  directed <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">epicontacts</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:90%;height:700px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"nodes":{"id":["Abdul Majeed el-Saleh","April Lopez","Ashley Martinez","Breanna Hofbauer","Courtney Flood","Daniel Croy","Emily Abo","Emily Fyffe","Fabian Mrazik","Forrest Anderson","Jaime Middleton","Jin Fu","Jonathan Vincent","Joseph Jiron","Joshua Wharry","Katlyn Nelson","Kevin Liddle","Lorraina Montoya","Miguel Oyebi","Nicholas Rentie","Rutaiba el-Raad","Sarah Bridwell","Shabeeba el-Younes","Soo Ho Yoo","Tia Vu","Yvonne Howard"],"id.1":[5,null,3,null,6,null,null,14,1,null,10,null,null,7,null,21,8,null,16,24,9,null,null,null,4,null],"case_type":["confirmed",null,"confirmed",null,"suspected",null,null,"confirmed","confirmed",null,"suspected",null,null,"suspected",null,"probable","suspected",null,"confirmed","suspected","confirmed",null,null,null,"probable",null],"sex":["m",null,"f",null,"f",null,null,"f","m",null,"m",null,null,"m",null,"f","m",null,"m","m","f",null,null,null,"f",null],"age":[77,null,71,null,83,null,null,16,90,null,1,null,null,56,null,36,39,null,54,49,68,null,null,null,48,null],"date_onset":["2023-01-01",null,"2023-01-01",null,"2023-01-02",null,null,"2023-01-01","2023-01-01",null,"2023-01-01",null,null,"2023-01-01",null,"2023-01-02","2023-01-01",null,"2023-01-02","2023-01-02","2023-01-01",null,null,null,"2023-01-01",null],"date_reporting":["2023-01-01",null,"2023-01-01",null,"2023-01-02",null,null,"2023-01-01","2023-01-01",null,"2023-01-01",null,null,"2023-01-01",null,"2023-01-02","2023-01-01",null,"2023-01-02","2023-01-02","2023-01-01",null,null,null,"2023-01-01",null],"date_admission":[null,null,"2023-01-08",null,null,null,null,"2023-01-02",null,null,null,null,null,null,null,null,null,null,"2023-01-05",null,null,null,null,null,null,null],"outcome":["recovered",null,"died",null,"recovered",null,null,"recovered","recovered",null,"recovered",null,null,"recovered",null,"recovered","recovered",null,"recovered","recovered","recovered",null,null,null,"recovered",null],"date_outcome":[null,null,"2023-01-10",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"date_first_contact":["2022-12-31",null,"2022-12-26",null,"2022-12-26",null,null,"2022-12-30",null,null,"2022-12-26",null,null,"2022-12-28",null,"2023-01-01","2022-12-31",null,"2022-12-30","2022-12-28","2022-12-29",null,null,null,"2022-12-30",null],"date_last_contact":["2023-01-08",null,"2023-01-06",null,"2023-01-04",null,null,"2023-01-02",null,null,"2023-01-02",null,null,"2023-01-03",null,"2023-01-03","2023-01-03",null,"2023-01-05","2023-01-04","2023-01-01",null,null,null,"2023-01-05",null],"ct_value":[27.4,null,22.7,null,null,null,null,21.3,21.9,null,null,null,null,null,null,null,null,null,26,null,24.2,null,null,null,null,null],"label":["Abdul Majeed el-Saleh","April Lopez","Ashley Martinez","Breanna Hofbauer","Courtney Flood","Daniel Croy","Emily Abo","Emily Fyffe","Fabian Mrazik","Forrest Anderson","Jaime Middleton","Jin Fu","Jonathan Vincent","Joseph Jiron","Joshua Wharry","Katlyn Nelson","Kevin Liddle","Lorraina Montoya","Miguel Oyebi","Nicholas Rentie","Rutaiba el-Raad","Sarah Bridwell","Shabeeba el-Younes","Soo Ho Yoo","Tia Vu","Yvonne Howard"],"title":["<p> id: Abdul Majeed el-Saleh<br>id.1: 5<br>case_type: confirmed<br>sex: m<br>age: 77<br>date_onset: 2023-01-01<br>date_reporting: 2023-01-01<br>date_admission: NA<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: 2022-12-31<br>date_last_contact: 2023-01-08<br>ct_value: 27.4 <\/p>","<p> id: April Lopez<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Ashley Martinez<br>id.1: 3<br>case_type: confirmed<br>sex: f<br>age: 71<br>date_onset: 2023-01-01<br>date_reporting: 2023-01-01<br>date_admission: 2023-01-08<br>outcome: died<br>date_outcome: 2023-01-10<br>date_first_contact: 2022-12-26<br>date_last_contact: 2023-01-06<br>ct_value: 22.7 <\/p>","<p> id: Breanna Hofbauer<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Courtney Flood<br>id.1: 6<br>case_type: suspected<br>sex: f<br>age: 83<br>date_onset: 2023-01-02<br>date_reporting: 2023-01-02<br>date_admission: NA<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: 2022-12-26<br>date_last_contact: 2023-01-04<br>ct_value: NA <\/p>","<p> id: Daniel Croy<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Emily Abo<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Emily Fyffe<br>id.1: 14<br>case_type: confirmed<br>sex: f<br>age: 16<br>date_onset: 2023-01-01<br>date_reporting: 2023-01-01<br>date_admission: 2023-01-02<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: 2022-12-30<br>date_last_contact: 2023-01-02<br>ct_value: 21.3 <\/p>","<p> id: Fabian Mrazik<br>id.1: 1<br>case_type: confirmed<br>sex: m<br>age: 90<br>date_onset: 2023-01-01<br>date_reporting: 2023-01-01<br>date_admission: NA<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: 21.9 <\/p>","<p> id: Forrest Anderson<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Jaime Middleton<br>id.1: 10<br>case_type: suspected<br>sex: m<br>age: 1<br>date_onset: 2023-01-01<br>date_reporting: 2023-01-01<br>date_admission: NA<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: 2022-12-26<br>date_last_contact: 2023-01-02<br>ct_value: NA <\/p>","<p> id: Jin Fu<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Jonathan Vincent<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Joseph Jiron<br>id.1: 7<br>case_type: suspected<br>sex: m<br>age: 56<br>date_onset: 2023-01-01<br>date_reporting: 2023-01-01<br>date_admission: NA<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: 2022-12-28<br>date_last_contact: 2023-01-03<br>ct_value: NA <\/p>","<p> id: Joshua Wharry<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Katlyn Nelson<br>id.1: 21<br>case_type: probable<br>sex: f<br>age: 36<br>date_onset: 2023-01-02<br>date_reporting: 2023-01-02<br>date_admission: NA<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: 2023-01-01<br>date_last_contact: 2023-01-03<br>ct_value: NA <\/p>","<p> id: Kevin Liddle<br>id.1: 8<br>case_type: suspected<br>sex: m<br>age: 39<br>date_onset: 2023-01-01<br>date_reporting: 2023-01-01<br>date_admission: NA<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: 2022-12-31<br>date_last_contact: 2023-01-03<br>ct_value: NA <\/p>","<p> id: Lorraina Montoya<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Miguel Oyebi<br>id.1: 16<br>case_type: confirmed<br>sex: m<br>age: 54<br>date_onset: 2023-01-02<br>date_reporting: 2023-01-02<br>date_admission: 2023-01-05<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: 2022-12-30<br>date_last_contact: 2023-01-05<br>ct_value: 26 <\/p>","<p> id: Nicholas Rentie<br>id.1: 24<br>case_type: suspected<br>sex: m<br>age: 49<br>date_onset: 2023-01-02<br>date_reporting: 2023-01-02<br>date_admission: NA<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: 2022-12-28<br>date_last_contact: 2023-01-04<br>ct_value: NA <\/p>","<p> id: Rutaiba el-Raad<br>id.1: 9<br>case_type: confirmed<br>sex: f<br>age: 68<br>date_onset: 2023-01-01<br>date_reporting: 2023-01-01<br>date_admission: NA<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: 2022-12-29<br>date_last_contact: 2023-01-01<br>ct_value: 24.2 <\/p>","<p> id: Sarah Bridwell<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Shabeeba el-Younes<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Soo Ho Yoo<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Tia Vu<br>id.1: 4<br>case_type: probable<br>sex: f<br>age: 48<br>date_onset: 2023-01-01<br>date_reporting: 2023-01-01<br>date_admission: NA<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: 2022-12-30<br>date_last_contact: 2023-01-05<br>ct_value: NA <\/p>","<p> id: Yvonne Howard<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>"],"color":["#CCDDFF","#AED9DE","#90D5BE","#83CFA7","#B3C4AB","#E4B9B0","#F0B0B5","#CFABBA","#AEA5BF","#B9AD92","#DABC4D","#FBCA07","#FFBD28","#FFAD57","#FCA281","#EAC58A","#D8E793","#CEF39D","#D5D0AB","#DBAEB8","#E5A8B7","#F0B8A9","#FCC89C","#F0CCA7","#DFCCBA","#CDCDCD"],"borderWidth":[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2]},"edges":{"from":["Fabian Mrazik","Fabian Mrazik","Fabian Mrazik","Fabian Mrazik","Ashley Martinez","Ashley Martinez","Tia Vu","Tia Vu","Abdul Majeed el-Saleh","Courtney Flood","Kevin Liddle","Kevin Liddle","Rutaiba el-Raad","Jaime Middleton","Jaime Middleton","Emily Fyffe","Emily Fyffe","Emily Fyffe","Miguel Oyebi","Miguel Oyebi","Miguel Oyebi","Katlyn Nelson","Katlyn Nelson","Katlyn Nelson","Nicholas Rentie"],"to":["Yvonne Howard","Ashley Martinez","Tia Vu","Abdul Majeed el-Saleh","Courtney Flood","Joseph Jiron","Kevin Liddle","Rutaiba el-Raad","Jaime Middleton","Jin Fu","Emily Abo","Sarah Bridwell","Emily Fyffe","Soo Ho Yoo","Miguel Oyebi","Forrest Anderson","Breanna Hofbauer","Shabeeba el-Younes","Lorraina Montoya","Katlyn Nelson","Joshua Wharry","Jonathan Vincent","Nicholas Rentie","Daniel Croy","April Lopez"],"age":[9,71,48,77,83,56,39,68,1,40,30,89,16,88,54,75,48,20,67,36,52,22,49,42,59],"sex":["f","f","f","m","f","m","m","f","m","f","f","f","f","m","m","m","f","f","f","f","m","m","m","m","f"],"date_first_contact":["2022-12-31","2022-12-26","2022-12-30","2022-12-31","2022-12-26","2022-12-28","2022-12-31","2022-12-29","2022-12-26","2022-12-30","2022-12-30","2022-12-28","2022-12-30","2022-12-30","2022-12-30","2022-12-30","2022-12-25","2022-12-31","2023-01-01","2023-01-01","2022-12-29","2022-12-30","2022-12-28","2022-12-29","2022-12-29"],"date_last_contact":["2023-01-05","2023-01-06","2023-01-05","2023-01-08","2023-01-04","2023-01-03","2023-01-03","2023-01-01","2023-01-02","2023-01-07","2023-01-03","2023-01-03","2023-01-02","2023-01-03","2023-01-05","2023-01-06","2023-01-04","2023-01-03","2023-01-04","2023-01-03","2023-01-04","2023-01-05","2023-01-04","2023-01-05","2023-01-04"],"was_case":[false,true,true,true,true,true,true,true,true,false,false,false,true,false,true,false,false,false,false,true,false,false,true,false,false],"status":["under_followup","case","case","case","case","case","case","case","case","under_followup","lost_to_followup","under_followup","case","lost_to_followup","case","under_followup","under_followup","under_followup","under_followup","case","under_followup","unknown","case","under_followup","lost_to_followup"],"width":[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot"},"manipulation":{"enabled":false},"physics":{"stabilization":false}},"groups":null,"width":"90%","height":"700px","idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":true,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false,"variable":"id","main":"Select by id","values":["Abdul Majeed el-Saleh","April Lopez","Ashley Martinez","Breanna Hofbauer","Courtney Flood","Daniel Croy","Emily Abo","Emily Fyffe","Fabian Mrazik","Forrest Anderson","Jaime Middleton","Jin Fu","Jonathan Vincent","Joseph Jiron","Joshua Wharry","Katlyn Nelson","Kevin Liddle","Lorraina Montoya","Miguel Oyebi","Nicholas Rentie","Rutaiba el-Raad","Sarah Bridwell","Shabeeba el-Younes","Soo Ho Yoo","Tia Vu","Yvonne Howard"]},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true},"highlight":{"enabled":true,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":false,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"opts_manipulation":{"datacss":"table.legend_table {\n  font-size: 11px;\n  border-width:1px;\n  border-color:#d3d3d3;\n  border-style:solid;\n}\ntable.legend_table td {\n  border-width:1px;\n  border-color:#d3d3d3;\n  border-style:solid;\n  padding: 2px;\n}\ndiv.table_content {\n  width:80px;\n  text-align:center;\n}\ndiv.table_description {\n  width:100px;\n}\n\n.operation {\n  font-size:20px;\n}\n\n.network-popUp {\n  display:none;\n  z-index:299;\n  width:250px;\n  /*height:150px;*/\n  background-color: #f9f9f9;\n  border-style:solid;\n  border-width:1px;\n  border-color: #0d0d0d;\n  padding:10px;\n  text-align: center;\n  position:fixed;\n  top:50%;  \n  left:50%;  \n  margin:-100px 0 0 -100px;  \n\n}","addNodeCols":["id","label"],"editNodeCols":["id","label"],"tab_add_node":"<span id=\"addnode-operation\" class = \"operation\">node<\/span> <br><table style=\"margin:auto;\"><tr><td>id<\/td><td><input id=\"addnode-id\"  type= \"text\" value=\"new value\"><\/td><\/tr><tr><td>label<\/td><td><input id=\"addnode-label\"  type= \"text\" value=\"new value\"><\/td><\/tr><\/table><input type=\"button\" value=\"save\" id=\"addnode-saveButton\"><\/button><input type=\"button\" value=\"cancel\" id=\"addnode-cancelButton\"><\/button>","tab_edit_node":"<span id=\"editnode-operation\" class = \"operation\">node<\/span> <br><table style=\"margin:auto;\"><tr><td>id<\/td><td><input id=\"editnode-id\"  type= \"text\" value=\"new value\"><\/td><\/tr><tr><td>label<\/td><td><input id=\"editnode-label\"  type= \"text\" value=\"new value\"><\/td><\/tr><\/table><input type=\"button\" value=\"save\" id=\"editnode-saveButton\"><\/button><input type=\"button\" value=\"cancel\" id=\"editnode-cancelButton\"><\/button>"},"iconsRedraw":true},"evals":[],"jsHooks":[]}</script><p>First we randomly sample who is not reported in the outbreak data.
For this example we assume the pool of people that can be unreported is
everyone in the contact network (infections and contacts), and assume a
50% reporting probability.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all_contacts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">contacts</span><span class="op">$</span><span class="va">from</span>, <span class="va">contacts</span><span class="op">$</span><span class="va">to</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">not_reported</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">all_contacts</span>, size <span class="op">=</span> <span class="fl">0.5</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">all_contacts</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">not_reported</span></span>
<span><span class="co">#&gt;  [1] "Katlyn Nelson"      "Jin Fu"             "Breanna Hofbauer"  </span></span>
<span><span class="co">#&gt;  [4] "Ashley Martinez"    "Emily Abo"          "Forrest Anderson"  </span></span>
<span><span class="co">#&gt;  [7] "Miguel Oyebi"       "Shabeeba el-Younes" "Sarah Bridwell"    </span></span>
<span><span class="co">#&gt; [10] "Rutaiba el-Raad"    "Yvonne Howard"      "Kevin Liddle"      </span></span>
<span><span class="co">#&gt; [13] "Nicholas Rentie"</span></span></code></pre></div>
<p>Next we subset the contact tracing data by removing infectees if that
are not reported. Because the contact tracing data is linked across
rows, we also need to set any unreported infectees to <code>NA</code>
for any secondary infections they cause.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># make copy of contact tracing data for under-reporting</span></span>
<span><span class="va">contacts_ur</span> <span class="op">&lt;-</span> <span class="va">contacts</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">person</span> <span class="kw">in</span> <span class="va">not_reported</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">contacts_ur</span> <span class="op">&lt;-</span> <span class="va">contacts_ur</span><span class="op">[</span><span class="va">contacts_ur</span><span class="op">$</span><span class="va">to</span> <span class="op">!=</span> <span class="va">person</span>, <span class="op">]</span></span>
<span>  <span class="va">contacts_ur</span><span class="op">[</span><span class="va">contacts_ur</span><span class="op">$</span><span class="va">from</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">person</span>, <span class="st">"from"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">contacts_ur</span><span class="op">)</span></span>
<span><span class="co">#&gt;                     from                    to age sex date_first_contact</span></span>
<span><span class="co">#&gt; 3          Fabian Mrazik                Tia Vu  48   f         2022-12-30</span></span>
<span><span class="co">#&gt; 4          Fabian Mrazik Abdul Majeed el-Saleh  77   m         2022-12-31</span></span>
<span><span class="co">#&gt; 5                   &lt;NA&gt;        Courtney Flood  83   f         2022-12-26</span></span>
<span><span class="co">#&gt; 6                   &lt;NA&gt;          Joseph Jiron  56   m         2022-12-28</span></span>
<span><span class="co">#&gt; 9  Abdul Majeed el-Saleh       Jaime Middleton   1   m         2022-12-26</span></span>
<span><span class="co">#&gt; 13                  &lt;NA&gt;           Emily Fyffe  16   f         2022-12-30</span></span>
<span><span class="co">#&gt;    date_last_contact was_case status</span></span>
<span><span class="co">#&gt; 3         2023-01-05     TRUE   case</span></span>
<span><span class="co">#&gt; 4         2023-01-08     TRUE   case</span></span>
<span><span class="co">#&gt; 5         2023-01-04     TRUE   case</span></span>
<span><span class="co">#&gt; 6         2023-01-03     TRUE   case</span></span>
<span><span class="co">#&gt; 9         2023-01-02     TRUE   case</span></span>
<span><span class="co">#&gt; 13        2023-01-02     TRUE   case</span></span></code></pre></div>
<p>We can plot this new contact network with {epicontacts}. We’ll need
to subset the line list to have the same unreported cases.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist_ur</span> <span class="op">&lt;-</span> <span class="va">linelist</span><span class="op">[</span><span class="op">!</span><span class="va">linelist</span><span class="op">$</span><span class="va">case_name</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">not_reported</span>, <span class="op">]</span></span>
<span><span class="va">epicontacts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://www.repidemicsconsortium.org/epicontacts/reference/make_epicontacts.html" class="external-link">make_epicontacts</a></span><span class="op">(</span></span>
<span>  linelist <span class="op">=</span> <span class="va">linelist_ur</span>,</span>
<span>  contacts <span class="op">=</span> <span class="va">contacts_ur</span>,</span>
<span>  id <span class="op">=</span> <span class="st">"case_name"</span>,</span>
<span>  from <span class="op">=</span> <span class="st">"from"</span>,</span>
<span>  to <span class="op">=</span> <span class="st">"to"</span>,</span>
<span>  directed <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">epicontacts</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-e5c8c404fe174e4c81bd" style="width:90%;height:700px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-e5c8c404fe174e4c81bd">{"x":{"nodes":{"id":["Abdul Majeed el-Saleh","April Lopez","Courtney Flood","Daniel Croy","Emily Fyffe","Fabian Mrazik","Jaime Middleton","Jonathan Vincent","Joseph Jiron","Joshua Wharry","Lorraina Montoya","Soo Ho Yoo","Tia Vu"],"id.1":[5,null,6,null,14,1,10,null,7,null,null,null,4],"case_type":["confirmed",null,"suspected",null,"confirmed","confirmed","suspected",null,"suspected",null,null,null,"probable"],"sex":["m",null,"f",null,"f","m","m",null,"m",null,null,null,"f"],"age":[77,null,83,null,16,90,1,null,56,null,null,null,48],"date_onset":["2023-01-01",null,"2023-01-02",null,"2023-01-01","2023-01-01","2023-01-01",null,"2023-01-01",null,null,null,"2023-01-01"],"date_reporting":["2023-01-01",null,"2023-01-02",null,"2023-01-01","2023-01-01","2023-01-01",null,"2023-01-01",null,null,null,"2023-01-01"],"date_admission":[null,null,null,null,"2023-01-02",null,null,null,null,null,null,null,null],"outcome":["recovered",null,"recovered",null,"recovered","recovered","recovered",null,"recovered",null,null,null,"recovered"],"date_outcome":[null,null,null,null,null,null,null,null,null,null,null,null,null],"date_first_contact":["2022-12-31",null,"2022-12-26",null,"2022-12-30",null,"2022-12-26",null,"2022-12-28",null,null,null,"2022-12-30"],"date_last_contact":["2023-01-08",null,"2023-01-04",null,"2023-01-02",null,"2023-01-02",null,"2023-01-03",null,null,null,"2023-01-05"],"ct_value":[27.4,null,null,null,21.3,21.9,null,null,null,null,null,null,null],"label":["Abdul Majeed el-Saleh","April Lopez","Courtney Flood","Daniel Croy","Emily Fyffe","Fabian Mrazik","Jaime Middleton","Jonathan Vincent","Joseph Jiron","Joshua Wharry","Lorraina Montoya","Soo Ho Yoo","Tia Vu"],"title":["<p> id: Abdul Majeed el-Saleh<br>id.1: 5<br>case_type: confirmed<br>sex: m<br>age: 77<br>date_onset: 2023-01-01<br>date_reporting: 2023-01-01<br>date_admission: NA<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: 2022-12-31<br>date_last_contact: 2023-01-08<br>ct_value: 27.4 <\/p>","<p> id: April Lopez<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Courtney Flood<br>id.1: 6<br>case_type: suspected<br>sex: f<br>age: 83<br>date_onset: 2023-01-02<br>date_reporting: 2023-01-02<br>date_admission: NA<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: 2022-12-26<br>date_last_contact: 2023-01-04<br>ct_value: NA <\/p>","<p> id: Daniel Croy<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Emily Fyffe<br>id.1: 14<br>case_type: confirmed<br>sex: f<br>age: 16<br>date_onset: 2023-01-01<br>date_reporting: 2023-01-01<br>date_admission: 2023-01-02<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: 2022-12-30<br>date_last_contact: 2023-01-02<br>ct_value: 21.3 <\/p>","<p> id: Fabian Mrazik<br>id.1: 1<br>case_type: confirmed<br>sex: m<br>age: 90<br>date_onset: 2023-01-01<br>date_reporting: 2023-01-01<br>date_admission: NA<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: 21.9 <\/p>","<p> id: Jaime Middleton<br>id.1: 10<br>case_type: suspected<br>sex: m<br>age: 1<br>date_onset: 2023-01-01<br>date_reporting: 2023-01-01<br>date_admission: NA<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: 2022-12-26<br>date_last_contact: 2023-01-02<br>ct_value: NA <\/p>","<p> id: Jonathan Vincent<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Joseph Jiron<br>id.1: 7<br>case_type: suspected<br>sex: m<br>age: 56<br>date_onset: 2023-01-01<br>date_reporting: 2023-01-01<br>date_admission: NA<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: 2022-12-28<br>date_last_contact: 2023-01-03<br>ct_value: NA <\/p>","<p> id: Joshua Wharry<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Lorraina Montoya<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Soo Ho Yoo<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Tia Vu<br>id.1: 4<br>case_type: probable<br>sex: f<br>age: 48<br>date_onset: 2023-01-01<br>date_reporting: 2023-01-01<br>date_admission: NA<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: 2022-12-30<br>date_last_contact: 2023-01-05<br>ct_value: NA <\/p>"],"color":["#CCDDFF","#8DD4BC","#BCC2AC","#E8AFB6","#A4A4C1","#E8C230","#FFB540","#F2B686","#CCFF99","#DAB6B5","#EFB5AC","#F2CCA6","#CDCDCD"],"borderWidth":[2,2,2,2,2,2,2,2,2,2,2,2,2]},"edges":{"from":["Fabian Mrazik","Fabian Mrazik","Abdul Majeed el-Saleh","Jaime Middleton"],"to":["Tia Vu","Abdul Majeed el-Saleh","Jaime Middleton","Soo Ho Yoo"],"age":[48,77,1,88],"sex":["f","m","m","m"],"date_first_contact":["2022-12-30","2022-12-31","2022-12-26","2022-12-30"],"date_last_contact":["2023-01-05","2023-01-08","2023-01-02","2023-01-03"],"was_case":[true,true,true,false],"status":["case","case","case","lost_to_followup"],"width":[3,3,3,3],"arrows":["to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot"},"manipulation":{"enabled":false},"physics":{"stabilization":false}},"groups":null,"width":"90%","height":"700px","idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":true,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false,"variable":"id","main":"Select by id","values":["Abdul Majeed el-Saleh","April Lopez","Courtney Flood","Daniel Croy","Emily Fyffe","Fabian Mrazik","Jaime Middleton","Jonathan Vincent","Joseph Jiron","Joshua Wharry","Lorraina Montoya","Soo Ho Yoo","Tia Vu"]},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true},"highlight":{"enabled":true,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":false,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"opts_manipulation":{"datacss":"table.legend_table {\n  font-size: 11px;\n  border-width:1px;\n  border-color:#d3d3d3;\n  border-style:solid;\n}\ntable.legend_table td {\n  border-width:1px;\n  border-color:#d3d3d3;\n  border-style:solid;\n  padding: 2px;\n}\ndiv.table_content {\n  width:80px;\n  text-align:center;\n}\ndiv.table_description {\n  width:100px;\n}\n\n.operation {\n  font-size:20px;\n}\n\n.network-popUp {\n  display:none;\n  z-index:299;\n  width:250px;\n  /*height:150px;*/\n  background-color: #f9f9f9;\n  border-style:solid;\n  border-width:1px;\n  border-color: #0d0d0d;\n  padding:10px;\n  text-align: center;\n  position:fixed;\n  top:50%;  \n  left:50%;  \n  margin:-100px 0 0 -100px;  \n\n}","addNodeCols":["id","label"],"editNodeCols":["id","label"],"tab_add_node":"<span id=\"addnode-operation\" class = \"operation\">node<\/span> <br><table style=\"margin:auto;\"><tr><td>id<\/td><td><input id=\"addnode-id\"  type= \"text\" value=\"new value\"><\/td><\/tr><tr><td>label<\/td><td><input id=\"addnode-label\"  type= \"text\" value=\"new value\"><\/td><\/tr><\/table><input type=\"button\" value=\"save\" id=\"addnode-saveButton\"><\/button><input type=\"button\" value=\"cancel\" id=\"addnode-cancelButton\"><\/button>","tab_edit_node":"<span id=\"editnode-operation\" class = \"operation\">node<\/span> <br><table style=\"margin:auto;\"><tr><td>id<\/td><td><input id=\"editnode-id\"  type= \"text\" value=\"new value\"><\/td><\/tr><tr><td>label<\/td><td><input id=\"editnode-label\"  type= \"text\" value=\"new value\"><\/td><\/tr><\/table><input type=\"button\" value=\"save\" id=\"editnode-saveButton\"><\/button><input type=\"button\" value=\"cancel\" id=\"editnode-cancelButton\"><\/button>"},"iconsRedraw":true},"evals":[],"jsHooks":[]}</script><p>The above example can be thought of as resulting from incomplete
recording or recall of contacts. A second method for under-reporting of
contact tracing data is to assume that if a case is unreported then all
of the cases and contacts stemming from the unreported case are
lost.</p>
<p>For this example we’ll sample a single individual not to report and
then prune all cases and contacts from that individual in the
network.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all_contacts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">contacts</span><span class="op">$</span><span class="va">from</span>, <span class="va">contacts</span><span class="op">$</span><span class="va">to</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">not_reported</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">all_contacts</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">not_reported</span></span>
<span><span class="co">#&gt; [1] "Abdul Majeed el-Saleh"</span></span></code></pre></div>
<p>Then we can recursively pruned all cases and contacts that are the
result from this individual (this can be zero if the person had no
secondary cases or contacts).</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># make copy of contact tracing data for under-reporting</span></span>
<span><span class="va">contacts_ur</span> <span class="op">&lt;-</span> <span class="va">contacts</span></span>
<span><span class="kw">while</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">not_reported</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">contacts_ur</span> <span class="op">&lt;-</span> <span class="va">contacts_ur</span><span class="op">[</span><span class="op">!</span><span class="va">contacts_ur</span><span class="op">$</span><span class="va">to</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">not_reported</span>, <span class="op">]</span></span>
<span>  <span class="va">not_reported_</span> <span class="op">&lt;-</span> <span class="va">contacts_ur</span><span class="op">$</span><span class="va">to</span><span class="op">[</span><span class="va">contacts_ur</span><span class="op">$</span><span class="va">from</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">not_reported</span><span class="op">]</span></span>
<span>  <span class="va">contacts_ur</span> <span class="op">&lt;-</span> <span class="va">contacts_ur</span><span class="op">[</span><span class="op">!</span><span class="va">contacts_ur</span><span class="op">$</span><span class="va">from</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">not_reported</span>, <span class="op">]</span></span>
<span>  <span class="va">not_reported</span> <span class="op">&lt;-</span> <span class="va">not_reported_</span></span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">contacts_ur</span><span class="op">)</span></span>
<span><span class="co">#&gt;              from              to age sex date_first_contact date_last_contact</span></span>
<span><span class="co">#&gt; 1   Fabian Mrazik   Yvonne Howard   9   f         2022-12-31        2023-01-05</span></span>
<span><span class="co">#&gt; 2   Fabian Mrazik Ashley Martinez  71   f         2022-12-26        2023-01-06</span></span>
<span><span class="co">#&gt; 3   Fabian Mrazik          Tia Vu  48   f         2022-12-30        2023-01-05</span></span>
<span><span class="co">#&gt; 5 Ashley Martinez  Courtney Flood  83   f         2022-12-26        2023-01-04</span></span>
<span><span class="co">#&gt; 6 Ashley Martinez    Joseph Jiron  56   m         2022-12-28        2023-01-03</span></span>
<span><span class="co">#&gt; 7          Tia Vu    Kevin Liddle  39   m         2022-12-31        2023-01-03</span></span>
<span><span class="co">#&gt;   was_case         status</span></span>
<span><span class="co">#&gt; 1    FALSE under_followup</span></span>
<span><span class="co">#&gt; 2     TRUE           case</span></span>
<span><span class="co">#&gt; 3     TRUE           case</span></span>
<span><span class="co">#&gt; 5     TRUE           case</span></span>
<span><span class="co">#&gt; 6     TRUE           case</span></span>
<span><span class="co">#&gt; 7     TRUE           case</span></span></code></pre></div>
<p>Just as above we can plot the new contact network using
{epicontacts}.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># subset line list to match under-reporting in contact tracing data</span></span>
<span><span class="va">linelist_ur</span> <span class="op">&lt;-</span> <span class="va">linelist</span><span class="op">[</span><span class="va">linelist</span><span class="op">$</span><span class="va">case_name</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">contacts</span><span class="op">$</span><span class="va">from</span><span class="op">)</span>, <span class="op">]</span></span>
<span></span>
<span><span class="va">epicontacts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://www.repidemicsconsortium.org/epicontacts/reference/make_epicontacts.html" class="external-link">make_epicontacts</a></span><span class="op">(</span></span>
<span>  linelist <span class="op">=</span> <span class="va">linelist_ur</span>,</span>
<span>  contacts <span class="op">=</span> <span class="va">contacts_ur</span>,</span>
<span>  id <span class="op">=</span> <span class="st">"case_name"</span>,</span>
<span>  from <span class="op">=</span> <span class="st">"from"</span>,</span>
<span>  to <span class="op">=</span> <span class="st">"to"</span>,</span>
<span>  directed <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">epicontacts</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-36aa3d2a04d42bbc2145" style="width:90%;height:700px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-36aa3d2a04d42bbc2145">{"x":{"nodes":{"id":["Ashley Martinez","Breanna Hofbauer","Courtney Flood","Emily Abo","Emily Fyffe","Fabian Mrazik","Forrest Anderson","Jin Fu","Joseph Jiron","Kevin Liddle","Rutaiba el-Raad","Sarah Bridwell","Shabeeba el-Younes","Tia Vu","Yvonne Howard"],"id.1":[3,null,6,null,14,1,null,null,null,8,9,null,null,4,null],"case_type":["confirmed",null,"suspected",null,"confirmed","confirmed",null,null,null,"suspected","confirmed",null,null,"probable",null],"sex":["f",null,"f",null,"f","m",null,null,null,"m","f",null,null,"f",null],"age":[71,null,83,null,16,90,null,null,null,39,68,null,null,48,null],"date_onset":["2023-01-01",null,"2023-01-02",null,"2023-01-01","2023-01-01",null,null,null,"2023-01-01","2023-01-01",null,null,"2023-01-01",null],"date_reporting":["2023-01-01",null,"2023-01-02",null,"2023-01-01","2023-01-01",null,null,null,"2023-01-01","2023-01-01",null,null,"2023-01-01",null],"date_admission":["2023-01-08",null,null,null,"2023-01-02",null,null,null,null,null,null,null,null,null,null],"outcome":["died",null,"recovered",null,"recovered","recovered",null,null,null,"recovered","recovered",null,null,"recovered",null],"date_outcome":["2023-01-10",null,null,null,null,null,null,null,null,null,null,null,null,null,null],"date_first_contact":["2022-12-26",null,"2022-12-26",null,"2022-12-30",null,null,null,null,"2022-12-31","2022-12-29",null,null,"2022-12-30",null],"date_last_contact":["2023-01-06",null,"2023-01-04",null,"2023-01-02",null,null,null,null,"2023-01-03","2023-01-01",null,null,"2023-01-05",null],"ct_value":[22.7,null,null,null,21.3,21.9,null,null,null,null,24.2,null,null,null,null],"label":["Ashley Martinez","Breanna Hofbauer","Courtney Flood","Emily Abo","Emily Fyffe","Fabian Mrazik","Forrest Anderson","Jin Fu","Joseph Jiron","Kevin Liddle","Rutaiba el-Raad","Sarah Bridwell","Shabeeba el-Younes","Tia Vu","Yvonne Howard"],"title":["<p> id: Ashley Martinez<br>id.1: 3<br>case_type: confirmed<br>sex: f<br>age: 71<br>date_onset: 2023-01-01<br>date_reporting: 2023-01-01<br>date_admission: 2023-01-08<br>outcome: died<br>date_outcome: 2023-01-10<br>date_first_contact: 2022-12-26<br>date_last_contact: 2023-01-06<br>ct_value: 22.7 <\/p>","<p> id: Breanna Hofbauer<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Courtney Flood<br>id.1: 6<br>case_type: suspected<br>sex: f<br>age: 83<br>date_onset: 2023-01-02<br>date_reporting: 2023-01-02<br>date_admission: NA<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: 2022-12-26<br>date_last_contact: 2023-01-04<br>ct_value: NA <\/p>","<p> id: Emily Abo<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Emily Fyffe<br>id.1: 14<br>case_type: confirmed<br>sex: f<br>age: 16<br>date_onset: 2023-01-01<br>date_reporting: 2023-01-01<br>date_admission: 2023-01-02<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: 2022-12-30<br>date_last_contact: 2023-01-02<br>ct_value: 21.3 <\/p>","<p> id: Fabian Mrazik<br>id.1: 1<br>case_type: confirmed<br>sex: m<br>age: 90<br>date_onset: 2023-01-01<br>date_reporting: 2023-01-01<br>date_admission: NA<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: 21.9 <\/p>","<p> id: Forrest Anderson<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Jin Fu<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Joseph Jiron<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Kevin Liddle<br>id.1: 8<br>case_type: suspected<br>sex: m<br>age: 39<br>date_onset: 2023-01-01<br>date_reporting: 2023-01-01<br>date_admission: NA<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: 2022-12-31<br>date_last_contact: 2023-01-03<br>ct_value: NA <\/p>","<p> id: Rutaiba el-Raad<br>id.1: 9<br>case_type: confirmed<br>sex: f<br>age: 68<br>date_onset: 2023-01-01<br>date_reporting: 2023-01-01<br>date_admission: NA<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: 2022-12-29<br>date_last_contact: 2023-01-01<br>ct_value: 24.2 <\/p>","<p> id: Sarah Bridwell<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Shabeeba el-Younes<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>","<p> id: Tia Vu<br>id.1: 4<br>case_type: probable<br>sex: f<br>age: 48<br>date_onset: 2023-01-01<br>date_reporting: 2023-01-01<br>date_admission: NA<br>outcome: recovered<br>date_outcome: NA<br>date_first_contact: 2022-12-30<br>date_last_contact: 2023-01-05<br>ct_value: NA <\/p>","<p> id: Yvonne Howard<br>id.1: NA<br>case_type: NA<br>sex: NA<br>age: NA<br>date_onset: NA<br>date_reporting: NA<br>date_admission: NA<br>outcome: NA<br>date_outcome: NA<br>date_first_contact: NA<br>date_last_contact: NA<br>ct_value: NA <\/p>"],"color":["#CCDDFF","#96D5C5","#9FC9A9","#F5B5B2","#CBAABB","#B7AC97","#F2C61B","#FFB540","#F7AC83","#D6EA93","#D4D5A9","#E1A2BC","#F5BFA3","#EDCCAB","#CDCDCD"],"borderWidth":[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2]},"edges":{"from":["Fabian Mrazik","Fabian Mrazik","Fabian Mrazik","Ashley Martinez","Ashley Martinez","Tia Vu","Tia Vu","Courtney Flood","Kevin Liddle","Kevin Liddle","Rutaiba el-Raad","Emily Fyffe","Emily Fyffe","Emily Fyffe"],"to":["Yvonne Howard","Ashley Martinez","Tia Vu","Courtney Flood","Joseph Jiron","Kevin Liddle","Rutaiba el-Raad","Jin Fu","Emily Abo","Sarah Bridwell","Emily Fyffe","Forrest Anderson","Breanna Hofbauer","Shabeeba el-Younes"],"age":[9,71,48,83,56,39,68,40,30,89,16,75,48,20],"sex":["f","f","f","f","m","m","f","f","f","f","f","m","f","f"],"date_first_contact":["2022-12-31","2022-12-26","2022-12-30","2022-12-26","2022-12-28","2022-12-31","2022-12-29","2022-12-30","2022-12-30","2022-12-28","2022-12-30","2022-12-30","2022-12-25","2022-12-31"],"date_last_contact":["2023-01-05","2023-01-06","2023-01-05","2023-01-04","2023-01-03","2023-01-03","2023-01-01","2023-01-07","2023-01-03","2023-01-03","2023-01-02","2023-01-06","2023-01-04","2023-01-03"],"was_case":[false,true,true,true,true,true,true,false,false,false,true,false,false,false],"status":["under_followup","case","case","case","case","case","case","under_followup","lost_to_followup","under_followup","case","under_followup","under_followup","under_followup"],"width":[3,3,3,3,3,3,3,3,3,3,3,3,3,3],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot"},"manipulation":{"enabled":false},"physics":{"stabilization":false}},"groups":null,"width":"90%","height":"700px","idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":true,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false,"variable":"id","main":"Select by id","values":["Ashley Martinez","Breanna Hofbauer","Courtney Flood","Emily Abo","Emily Fyffe","Fabian Mrazik","Forrest Anderson","Jin Fu","Joseph Jiron","Kevin Liddle","Rutaiba el-Raad","Sarah Bridwell","Shabeeba el-Younes","Tia Vu","Yvonne Howard"]},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true},"highlight":{"enabled":true,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":false,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"opts_manipulation":{"datacss":"table.legend_table {\n  font-size: 11px;\n  border-width:1px;\n  border-color:#d3d3d3;\n  border-style:solid;\n}\ntable.legend_table td {\n  border-width:1px;\n  border-color:#d3d3d3;\n  border-style:solid;\n  padding: 2px;\n}\ndiv.table_content {\n  width:80px;\n  text-align:center;\n}\ndiv.table_description {\n  width:100px;\n}\n\n.operation {\n  font-size:20px;\n}\n\n.network-popUp {\n  display:none;\n  z-index:299;\n  width:250px;\n  /*height:150px;*/\n  background-color: #f9f9f9;\n  border-style:solid;\n  border-width:1px;\n  border-color: #0d0d0d;\n  padding:10px;\n  text-align: center;\n  position:fixed;\n  top:50%;  \n  left:50%;  \n  margin:-100px 0 0 -100px;  \n\n}","addNodeCols":["id","label"],"editNodeCols":["id","label"],"tab_add_node":"<span id=\"addnode-operation\" class = \"operation\">node<\/span> <br><table style=\"margin:auto;\"><tr><td>id<\/td><td><input id=\"addnode-id\"  type= \"text\" value=\"new value\"><\/td><\/tr><tr><td>label<\/td><td><input id=\"addnode-label\"  type= \"text\" value=\"new value\"><\/td><\/tr><\/table><input type=\"button\" value=\"save\" id=\"addnode-saveButton\"><\/button><input type=\"button\" value=\"cancel\" id=\"addnode-cancelButton\"><\/button>","tab_edit_node":"<span id=\"editnode-operation\" class = \"operation\">node<\/span> <br><table style=\"margin:auto;\"><tr><td>id<\/td><td><input id=\"editnode-id\"  type= \"text\" value=\"new value\"><\/td><\/tr><tr><td>label<\/td><td><input id=\"editnode-label\"  type= \"text\" value=\"new value\"><\/td><\/tr><\/table><input type=\"button\" value=\"save\" id=\"editnode-saveButton\"><\/button><input type=\"button\" value=\"cancel\" id=\"editnode-cancelButton\"><\/button>"},"iconsRedraw":true},"evals":[],"jsHooks":[]}</script><p>There are more complex under-reporting depending on covariates in the
line list and contact tracing data such as <code>$case_type</code> in
the line list, with suspected cases most likely to go unreported, or
<code>$status</code> in the contact tracing data, with
<code>unknown</code> or <code>lost_to_followup</code> more likely to be
under-reported.</p>
</div>
<div class="section level2 tabset">
<h2 class="tabset" id="removing-a-line-list-column">Removing a line list column<a class="anchor" aria-label="anchor" href="#removing-a-line-list-column"></a>
</h2>
<p>Not every column in the simulated line list may be required for the
use case at hand. In this example we will remove the
<code>$ct_value</code> column. For instance, if we wanted to simulate an
outbreak for which no laboratory testing (e.g Polymerase chain reaction,
PCR, testing) was available and thus a Cycle threshold (Ct) value would
not be known for confirmed cases.</p>


<ul class="nav nav-tabs" id="removing-a-line-list-column" role="tablist">
<li role="presentation" class="nav-item"><button data-bs-toggle="tab" data-bs-target="#tidyverse-1" id="tidyverse-1-tab" type="button" role="tab" aria-controls="tidyverse-1" aria-selected="true" class="active nav-link">Tidyverse</button></li>
<li role="presentation" class="nav-item"><button data-bs-toggle="tab" data-bs-target="#base-r-1" id="base-r-1-tab" type="button" role="tab" aria-controls="base-r-1" aria-selected="false" class="nav-link">Base R</button></li>
</ul>
<div class="tab-content">
<div class="active  tab-pane" id="tidyverse-1" role="tabpanel" aria-labelledby="tidyverse-1-tab">

<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># remove column by name</span></span>
<span><span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co"># nolint one_call_pipe_linter</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">!</span><span class="va">ct_value</span><span class="op">)</span></span>
<span><span class="co">#&gt;    id             case_name case_type sex age date_onset date_reporting</span></span>
<span><span class="co">#&gt; 1   1         Fabian Mrazik confirmed   m  90 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 2   3       Ashley Martinez confirmed   f  71 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 3   4                Tia Vu  probable   f  48 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 4   5 Abdul Majeed el-Saleh confirmed   m  77 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 5   6        Courtney Flood suspected   f  83 2023-01-02     2023-01-02</span></span>
<span><span class="co">#&gt; 6   7          Joseph Jiron suspected   m  56 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 7   8          Kevin Liddle suspected   m  39 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 8   9       Rutaiba el-Raad confirmed   f  68 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 9  10       Jaime Middleton suspected   m   1 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 10 14           Emily Fyffe confirmed   f  16 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 11 16          Miguel Oyebi confirmed   m  54 2023-01-02     2023-01-02</span></span>
<span><span class="co">#&gt; 12 21         Katlyn Nelson  probable   f  36 2023-01-02     2023-01-02</span></span>
<span><span class="co">#&gt; 13 24       Nicholas Rentie suspected   m  49 2023-01-02     2023-01-02</span></span>
<span><span class="co">#&gt;    date_admission   outcome date_outcome date_first_contact date_last_contact</span></span>
<span><span class="co">#&gt; 1            &lt;NA&gt; recovered         &lt;NA&gt;               &lt;NA&gt;              &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2      2023-01-08      died   2023-01-10         2022-12-26        2023-01-06</span></span>
<span><span class="co">#&gt; 3            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-30        2023-01-05</span></span>
<span><span class="co">#&gt; 4            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-31        2023-01-08</span></span>
<span><span class="co">#&gt; 5            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-26        2023-01-04</span></span>
<span><span class="co">#&gt; 6            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-28        2023-01-03</span></span>
<span><span class="co">#&gt; 7            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-31        2023-01-03</span></span>
<span><span class="co">#&gt; 8            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-29        2023-01-01</span></span>
<span><span class="co">#&gt; 9            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-26        2023-01-02</span></span>
<span><span class="co">#&gt; 10     2023-01-02 recovered         &lt;NA&gt;         2022-12-30        2023-01-02</span></span>
<span><span class="co">#&gt; 11     2023-01-05 recovered         &lt;NA&gt;         2022-12-30        2023-01-05</span></span>
<span><span class="co">#&gt; 12           &lt;NA&gt; recovered         &lt;NA&gt;         2023-01-01        2023-01-03</span></span>
<span><span class="co">#&gt; 13           &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-28        2023-01-04</span></span></code></pre></div>
</div>
<div class="tab-pane" id="base-r-1" role="tabpanel" aria-labelledby="base-r-1-tab">

<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># remove column by numeric column indexing</span></span>
<span><span class="co"># ct_value is column 12 (the last column)</span></span>
<span><span class="va">linelist</span><span class="op">[</span>, <span class="op">-</span><span class="fl">12</span><span class="op">]</span></span>
<span><span class="co">#&gt;    id             case_name case_type sex age date_onset date_reporting</span></span>
<span><span class="co">#&gt; 1   1         Fabian Mrazik confirmed   m  90 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 2   3       Ashley Martinez confirmed   f  71 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 3   4                Tia Vu  probable   f  48 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 4   5 Abdul Majeed el-Saleh confirmed   m  77 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 5   6        Courtney Flood suspected   f  83 2023-01-02     2023-01-02</span></span>
<span><span class="co">#&gt; 6   7          Joseph Jiron suspected   m  56 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 7   8          Kevin Liddle suspected   m  39 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 8   9       Rutaiba el-Raad confirmed   f  68 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 9  10       Jaime Middleton suspected   m   1 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 10 14           Emily Fyffe confirmed   f  16 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 11 16          Miguel Oyebi confirmed   m  54 2023-01-02     2023-01-02</span></span>
<span><span class="co">#&gt; 12 21         Katlyn Nelson  probable   f  36 2023-01-02     2023-01-02</span></span>
<span><span class="co">#&gt; 13 24       Nicholas Rentie suspected   m  49 2023-01-02     2023-01-02</span></span>
<span><span class="co">#&gt;    date_admission   outcome date_outcome date_first_contact ct_value</span></span>
<span><span class="co">#&gt; 1            &lt;NA&gt; recovered         &lt;NA&gt;               &lt;NA&gt;     21.9</span></span>
<span><span class="co">#&gt; 2      2023-01-08      died   2023-01-10         2022-12-26     22.7</span></span>
<span><span class="co">#&gt; 3            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-30       NA</span></span>
<span><span class="co">#&gt; 4            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-31     27.4</span></span>
<span><span class="co">#&gt; 5            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-26       NA</span></span>
<span><span class="co">#&gt; 6            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-28       NA</span></span>
<span><span class="co">#&gt; 7            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-31       NA</span></span>
<span><span class="co">#&gt; 8            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-29     24.2</span></span>
<span><span class="co">#&gt; 9            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-26       NA</span></span>
<span><span class="co">#&gt; 10     2023-01-02 recovered         &lt;NA&gt;         2022-12-30     21.3</span></span>
<span><span class="co">#&gt; 11     2023-01-05 recovered         &lt;NA&gt;         2022-12-30     26.0</span></span>
<span><span class="co">#&gt; 12           &lt;NA&gt; recovered         &lt;NA&gt;         2023-01-01       NA</span></span>
<span><span class="co">#&gt; 13           &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-28       NA</span></span>
<span></span>
<span><span class="co"># remove column by column name</span></span>
<span><span class="va">linelist</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">)</span> <span class="op">!=</span> <span class="st">"ct_value"</span><span class="op">]</span></span>
<span><span class="co">#&gt;    id             case_name case_type sex age date_onset date_reporting</span></span>
<span><span class="co">#&gt; 1   1         Fabian Mrazik confirmed   m  90 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 2   3       Ashley Martinez confirmed   f  71 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 3   4                Tia Vu  probable   f  48 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 4   5 Abdul Majeed el-Saleh confirmed   m  77 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 5   6        Courtney Flood suspected   f  83 2023-01-02     2023-01-02</span></span>
<span><span class="co">#&gt; 6   7          Joseph Jiron suspected   m  56 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 7   8          Kevin Liddle suspected   m  39 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 8   9       Rutaiba el-Raad confirmed   f  68 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 9  10       Jaime Middleton suspected   m   1 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 10 14           Emily Fyffe confirmed   f  16 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 11 16          Miguel Oyebi confirmed   m  54 2023-01-02     2023-01-02</span></span>
<span><span class="co">#&gt; 12 21         Katlyn Nelson  probable   f  36 2023-01-02     2023-01-02</span></span>
<span><span class="co">#&gt; 13 24       Nicholas Rentie suspected   m  49 2023-01-02     2023-01-02</span></span>
<span><span class="co">#&gt;    date_admission   outcome date_outcome date_first_contact date_last_contact</span></span>
<span><span class="co">#&gt; 1            &lt;NA&gt; recovered         &lt;NA&gt;               &lt;NA&gt;              &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2      2023-01-08      died   2023-01-10         2022-12-26        2023-01-06</span></span>
<span><span class="co">#&gt; 3            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-30        2023-01-05</span></span>
<span><span class="co">#&gt; 4            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-31        2023-01-08</span></span>
<span><span class="co">#&gt; 5            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-26        2023-01-04</span></span>
<span><span class="co">#&gt; 6            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-28        2023-01-03</span></span>
<span><span class="co">#&gt; 7            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-31        2023-01-03</span></span>
<span><span class="co">#&gt; 8            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-29        2023-01-01</span></span>
<span><span class="co">#&gt; 9            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-26        2023-01-02</span></span>
<span><span class="co">#&gt; 10     2023-01-02 recovered         &lt;NA&gt;         2022-12-30        2023-01-02</span></span>
<span><span class="co">#&gt; 11     2023-01-05 recovered         &lt;NA&gt;         2022-12-30        2023-01-05</span></span>
<span><span class="co">#&gt; 12           &lt;NA&gt; recovered         &lt;NA&gt;         2023-01-01        2023-01-03</span></span>
<span><span class="co">#&gt; 13           &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-28        2023-01-04</span></span>
<span></span>
<span><span class="co"># remove column by assigning it to NULL</span></span>
<span><span class="va">linelist</span><span class="op">$</span><span class="va">ct_value</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="va">linelist</span></span>
<span><span class="co">#&gt;    id             case_name case_type sex age date_onset date_reporting</span></span>
<span><span class="co">#&gt; 1   1         Fabian Mrazik confirmed   m  90 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 2   3       Ashley Martinez confirmed   f  71 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 3   4                Tia Vu  probable   f  48 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 4   5 Abdul Majeed el-Saleh confirmed   m  77 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 5   6        Courtney Flood suspected   f  83 2023-01-02     2023-01-02</span></span>
<span><span class="co">#&gt; 6   7          Joseph Jiron suspected   m  56 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 7   8          Kevin Liddle suspected   m  39 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 8   9       Rutaiba el-Raad confirmed   f  68 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 9  10       Jaime Middleton suspected   m   1 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 10 14           Emily Fyffe confirmed   f  16 2023-01-01     2023-01-01</span></span>
<span><span class="co">#&gt; 11 16          Miguel Oyebi confirmed   m  54 2023-01-02     2023-01-02</span></span>
<span><span class="co">#&gt; 12 21         Katlyn Nelson  probable   f  36 2023-01-02     2023-01-02</span></span>
<span><span class="co">#&gt; 13 24       Nicholas Rentie suspected   m  49 2023-01-02     2023-01-02</span></span>
<span><span class="co">#&gt;    date_admission   outcome date_outcome date_first_contact date_last_contact</span></span>
<span><span class="co">#&gt; 1            &lt;NA&gt; recovered         &lt;NA&gt;               &lt;NA&gt;              &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2      2023-01-08      died   2023-01-10         2022-12-26        2023-01-06</span></span>
<span><span class="co">#&gt; 3            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-30        2023-01-05</span></span>
<span><span class="co">#&gt; 4            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-31        2023-01-08</span></span>
<span><span class="co">#&gt; 5            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-26        2023-01-04</span></span>
<span><span class="co">#&gt; 6            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-28        2023-01-03</span></span>
<span><span class="co">#&gt; 7            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-31        2023-01-03</span></span>
<span><span class="co">#&gt; 8            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-29        2023-01-01</span></span>
<span><span class="co">#&gt; 9            &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-26        2023-01-02</span></span>
<span><span class="co">#&gt; 10     2023-01-02 recovered         &lt;NA&gt;         2022-12-30        2023-01-02</span></span>
<span><span class="co">#&gt; 11     2023-01-05 recovered         &lt;NA&gt;         2022-12-30        2023-01-05</span></span>
<span><span class="co">#&gt; 12           &lt;NA&gt; recovered         &lt;NA&gt;         2023-01-01        2023-01-03</span></span>
<span><span class="co">#&gt; 13           &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-28        2023-01-04</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="section-1"></h2>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Joshua W. Lambert, Carmen Tamayo Cuartero.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3. Theme provided by <a href="https://github.com/epiverse-trace/epiversetheme" class="external-link">epiversetheme</a> 0.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
