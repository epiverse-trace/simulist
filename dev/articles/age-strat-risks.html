<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="simulist">
<title>Age-stratified hospitalisation and death risks â€¢ simulist</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Age-stratified hospitalisation and death risks">
<meta property="og:description" content="simulist">
<meta property="og:image" content="https://epiverse-trace.github.io/simulist/logo.svg">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XZ471458FQ');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a href="https://epiverse-trace.github.io/" class="external-link"><img src="../logo_white.svg" id="logo" alt="Epiverse-TRACE"></a>
    <a class="navbar-brand me-2" href="../index.html">simulist</a>

    <small class="nav-text text-danger me-auto version-number" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.2.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/simulist.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Package Vignettes</h6>
    <a class="dropdown-item" href="../articles/age-strat-risks.html">Age-stratified hospitalisation and death risks</a>
    <a class="dropdown-item" href="../articles/age-struct-pop.html">Age structured population</a>
    <a class="dropdown-item" href="../articles/vis-linelist.html">Visualising simulated data</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Developer Documentation</h6>
    <a class="dropdown-item" href="../articles/design-principles.html">Design Principles for {simulist}</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/epiverse-trace/simulist/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">


<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Age-stratified hospitalisation and death risks</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/simulist/blob/HEAD/vignettes/age-strat-risks.Rmd" class="external-link"><code>vignettes/age-strat-risks.Rmd</code></a></small>
      <div class="d-none name"><code>age-strat-risks.Rmd</code></div>
    </div>

    
    
<div class="alert alert-info">
<p>If you are unfamiliar with the {simulist} package or the <code><a href="../reference/sim_linelist.html">sim_linelist()</a></code> function <a href="simulist.html">Get Started vignette</a> is a great place to start.</p>
</div>
<p>This vignette will describe how to simulate a line list with age-stratified (or age-dependent) hospitalisation and death risks.</p>
<p>There are three risks in {simulist}, specifically in the <code><a href="../reference/sim_linelist.html">sim_linelist()</a></code> and <code><a href="../reference/sim_outbreak.html">sim_outbreak()</a></code> functions, that relate to hospitalisations and deaths:</p>
<ol style="list-style-type: decimal">
<li>Hospitalisation risk (<code>hosp_risk</code>)</li>
<li>Death risk in hospitals (<code>hosp_death_risk</code>)</li>
<li>Death risk outside of hospitals (<code>non_hosp_death_risk</code>)</li>
</ol>
<p>The default for <code><a href="../reference/sim_linelist.html">sim_linelist()</a></code> is a <code>0.2</code> (or 20%) hospitalisation risk for individuals infected, <code>0.5</code> (or 50%) death risk for hospitalised individuals, and <code>0.05</code> (or 5%) death risk for infected individuals outside of hospitals. These default risks are applied to all age groups in the populations.</p>
<p>However, it may be unrealistic to assume that the probability an infected person is admitted to hospital or dies is independent of their age. For many diseases, young children or elderly individuals are at higher risk of being hospitalised and having adverse outcomes.</p>
<p>The <code><a href="../reference/sim_linelist.html">sim_linelist()</a></code> function can accommodate age-stratified risks by accepting a <code>&lt;data.frame&gt;</code> instead of a single risk for the entire population.</p>
<details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/epiverse-trace/simulist" class="external-link">simulist</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/epiverse-trace/epiparameter" class="external-link">epiparameter</a></span><span class="op">)</span></span></code></pre></div>
</details><p>Here is an example that uses the default hospitalisation and death risks (inside and outside of hospital). First we load the requested delay distributions using the {epiparameter} package.</p>
<details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">contact_distribution</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://epiverse-trace.github.io/epiparameter/reference/epidist.html" class="external-link">epidist</a></span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"COVID-19"</span>,</span>
<span>  epi_dist <span class="op">=</span> <span class="st">"contact distribution"</span>,</span>
<span>  prob_distribution <span class="op">=</span> <span class="st">"pois"</span>,</span>
<span>  prob_distribution_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Citation cannot be created as author, year, journal or title is missing</span></span>
<span></span>
<span><span class="va">infect_period</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://epiverse-trace.github.io/epiparameter/reference/epidist.html" class="external-link">epidist</a></span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"COVID-19"</span>,</span>
<span>  epi_dist <span class="op">=</span> <span class="st">"infectious period"</span>,</span>
<span>  prob_distribution <span class="op">=</span> <span class="st">"gamma"</span>,</span>
<span>  prob_distribution_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="fl">1</span>, scale <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Citation cannot be created as author, year, journal or title is missing</span></span>
<span></span>
<span><span class="co"># get onset to hospital admission from {epiparameter} database</span></span>
<span><span class="va">onset_to_hosp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://epiverse-trace.github.io/epiparameter/reference/epidist_db.html" class="external-link">epidist_db</a></span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"COVID-19"</span>,</span>
<span>  epi_dist <span class="op">=</span> <span class="st">"onset to hospitalisation"</span>,</span>
<span>  single_epidist <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Using Linton N, Kobayashi T, Yang Y, Hayashi K, Akhmetzhanov A, Jung S, Yuan</span></span>
<span><span class="co">#&gt; B, Kinoshita R, Nishiura H (2020). "Incubation Period and Other</span></span>
<span><span class="co">#&gt; Epidemiological Characteristics of 2019 Novel Coronavirus Infections</span></span>
<span><span class="co">#&gt; with Right Truncation: A Statistical Analysis of Publicly Available</span></span>
<span><span class="co">#&gt; Case Data." _Journal of Clinical Medicine_. doi:10.3390/jcm9020538</span></span>
<span><span class="co">#&gt; &lt;https://doi.org/10.3390/jcm9020538&gt;.. </span></span>
<span><span class="co">#&gt; To retrieve the citation use the 'get_citation' function</span></span>
<span></span>
<span><span class="co"># get onset to death from {epiparameter} database</span></span>
<span><span class="va">onset_to_death</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://epiverse-trace.github.io/epiparameter/reference/epidist_db.html" class="external-link">epidist_db</a></span><span class="op">(</span></span>
<span>  disease <span class="op">=</span> <span class="st">"COVID-19"</span>,</span>
<span>  epi_dist <span class="op">=</span> <span class="st">"onset to death"</span>,</span>
<span>  single_epidist <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Using Linton N, Kobayashi T, Yang Y, Hayashi K, Akhmetzhanov A, Jung S, Yuan</span></span>
<span><span class="co">#&gt; B, Kinoshita R, Nishiura H (2020). "Incubation Period and Other</span></span>
<span><span class="co">#&gt; Epidemiological Characteristics of 2019 Novel Coronavirus Infections</span></span>
<span><span class="co">#&gt; with Right Truncation: A Statistical Analysis of Publicly Available</span></span>
<span><span class="co">#&gt; Case Data." _Journal of Clinical Medicine_. doi:10.3390/jcm9020538</span></span>
<span><span class="co">#&gt; &lt;https://doi.org/10.3390/jcm9020538&gt;.. </span></span>
<span><span class="co">#&gt; To retrieve the citation use the 'get_citation' function</span></span></code></pre></div>
</details><p>We set the seed to ensure we have the same output each time the vignette is rendered. When using {simulist}, setting the seed is not required unless you need to simulate the same line list multiple times.</p>
<details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
</details><div class="section level2">
<h2 id="population-wide-risks">Population-wide risks<a class="anchor" aria-label="anchor" href="#population-wide-risks"></a>
</h2>
<p>Simulate a line list with population-wide default risks:</p>
<ul>
<li>hospitalisation risk: <code>0.2</code>
</li>
<li>death risk in hospitals <code>0.5</code>
</li>
<li>death risk outside of hospitals <code>0.05</code>
</li>
</ul>
<details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_linelist.html">sim_linelist</a></span><span class="op">(</span></span>
<span>  contact_distribution <span class="op">=</span> <span class="va">contact_distribution</span>,</span>
<span>  infect_period <span class="op">=</span> <span class="va">infect_period</span>,</span>
<span>  prob_infect <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  onset_to_hosp <span class="op">=</span> <span class="va">onset_to_hosp</span>,</span>
<span>  onset_to_death <span class="op">=</span> <span class="va">onset_to_death</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># first 6 rows of linelist</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id        case_name case_type sex age date_onset date_admission date_death</span></span>
<span><span class="co">#&gt; 1  1 Isaiah Patterson  probable   m  35 2023-01-01           &lt;NA&gt;       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2  2     Michael John suspected   m  43 2023-01-01           &lt;NA&gt;       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3  3   Lorenzo Gaynor confirmed   m   1 2023-01-01           &lt;NA&gt;       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4  5     Cass Milburn confirmed   m  78 2023-01-01           &lt;NA&gt;       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5  6        Hope Cobb  probable   f  22 2023-01-01           &lt;NA&gt;       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6  8    Wyona Lenahan  probable   f  28 2023-01-01           &lt;NA&gt;       &lt;NA&gt;</span></span>
<span><span class="co">#&gt;   date_first_contact date_last_contact ct_value</span></span>
<span><span class="co">#&gt; 1               &lt;NA&gt;              &lt;NA&gt;       NA</span></span>
<span><span class="co">#&gt; 2         2022-12-30        2023-01-05       NA</span></span>
<span><span class="co">#&gt; 3         2022-12-30        2023-01-02     25.6</span></span>
<span><span class="co">#&gt; 4         2022-12-29        2023-01-02     25.6</span></span>
<span><span class="co">#&gt; 5         2023-01-01        2023-01-03       NA</span></span>
<span><span class="co">#&gt; 6         2023-01-03        2023-01-04       NA</span></span></code></pre></div>
</details><p>We can run another simulation and change the hospitalisation and death risks, inside and outside the hospital, still applied to the entire population. In this scenario the probability of being hospitalised if infected is higher, but the mortality risk for both hospitalised and non-hospitalised groups is lower.</p>
<details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_linelist.html">sim_linelist</a></span><span class="op">(</span></span>
<span>  contact_distribution <span class="op">=</span> <span class="va">contact_distribution</span>,</span>
<span>  infect_period <span class="op">=</span> <span class="va">infect_period</span>,</span>
<span>  prob_infect <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  onset_to_hosp <span class="op">=</span> <span class="va">onset_to_hosp</span>,</span>
<span>  onset_to_death <span class="op">=</span> <span class="va">onset_to_death</span>,</span>
<span>  hosp_risk <span class="op">=</span> <span class="fl">0.4</span>,</span>
<span>  hosp_death_risk <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>  non_hosp_death_risk <span class="op">=</span> <span class="fl">0.01</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id            case_name case_type sex age date_onset date_admission</span></span>
<span><span class="co">#&gt; 1  1         Carlos Lopez suspected   m  80 2023-01-01     2023-01-11</span></span>
<span><span class="co">#&gt; 2  2      Inaaya al-Majid  probable   f  85 2023-01-01     2023-01-03</span></span>
<span><span class="co">#&gt; 3  4    Shaqeeqa al-Zafar  probable   f  76 2023-01-01           &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4  8     Jolene Caballero confirmed   f  12 2023-01-01           &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5 11       Catrina Chavez suspected   f  50 2023-01-01           &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6 14 Quan Yu Jade Babauta  probable   f  54 2023-01-01     2023-01-03</span></span>
<span><span class="co">#&gt;   date_death date_first_contact date_last_contact ct_value</span></span>
<span><span class="co">#&gt; 1       &lt;NA&gt;               &lt;NA&gt;              &lt;NA&gt;       NA</span></span>
<span><span class="co">#&gt; 2       &lt;NA&gt;         2023-01-04        2023-01-06       NA</span></span>
<span><span class="co">#&gt; 3       &lt;NA&gt;         2022-12-30        2023-01-03       NA</span></span>
<span><span class="co">#&gt; 4       &lt;NA&gt;         2023-01-05        2023-01-05     25.7</span></span>
<span><span class="co">#&gt; 5       &lt;NA&gt;         2023-01-03        2023-01-05       NA</span></span>
<span><span class="co">#&gt; 6       &lt;NA&gt;         2022-12-31        2023-01-02       NA</span></span></code></pre></div>
</details>
</div>
<div class="section level2">
<h2 id="age-stratified-hospitalisation-and-death-risks">Age-stratified hospitalisation and death risks<a class="anchor" aria-label="anchor" href="#age-stratified-hospitalisation-and-death-risks"></a>
</h2>
<p>To define age-stratified risks, we must create a table (<code>&lt;data.frame&gt;</code>) which contains the lower limits of the age groups and their respective risks.</p>
<p>In this example the hospitalisation risk will be:</p>
<ul>
<li>
<code>0.2</code> (or 20%) for those aged 80 years or older</li>
<li>
<code>0.1</code> (or 10%) for those younger than 5 years</li>
<li>
<code>0.05</code> (or 5%) for the remaining age group</li>
</ul>
<p>The oldest age group stops at the upper age range given in the <code>population_age</code> argument. The default upper age range in 90, so in this example the oldest age bracket will be 80-90 (inclusive). The minimum age of each age group is inclusive, and the maximum age of each age group is exclusive, except the oldest age group which is inclusive of the minimum and maximum age. In this example the first age group is the first element of each vector, so the minimum age is 1, maximum age is four (as the next age group starts at five), and the hospitalisation risk for that group is 0.1. Each age group forms a row in the table.</p>
<details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age_dep_hosp_risk</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  age_limit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">80</span><span class="op">)</span>,</span>
<span>  risk <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.05</span>, <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">age_dep_hosp_risk</span></span>
<span><span class="co">#&gt;   age_limit risk</span></span>
<span><span class="co">#&gt; 1         1 0.10</span></span>
<span><span class="co">#&gt; 2         5 0.05</span></span>
<span><span class="co">#&gt; 3        80 0.20</span></span></code></pre></div>
</details><details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_linelist.html">sim_linelist</a></span><span class="op">(</span></span>
<span>  contact_distribution <span class="op">=</span> <span class="va">contact_distribution</span>,</span>
<span>  infect_period <span class="op">=</span> <span class="va">infect_period</span>,</span>
<span>  prob_infect <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  onset_to_hosp <span class="op">=</span> <span class="va">onset_to_hosp</span>,</span>
<span>  onset_to_death <span class="op">=</span> <span class="va">onset_to_death</span>,</span>
<span>  hosp_risk <span class="op">=</span> <span class="va">age_dep_hosp_risk</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id             case_name case_type sex age date_onset date_admission</span></span>
<span><span class="co">#&gt; 1  1           Berwo Savoy suspected   f  81 2023-01-01           &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2  2 Justin Running-Rabbit suspected   m  50 2023-01-01           &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3  3            Taylor Kim confirmed   f   4 2023-01-01           &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4  4          Adrian Lopez suspected   m  82 2023-01-01     2023-01-21</span></span>
<span><span class="co">#&gt; 5  6           Alicia Vang suspected   f  12 2023-01-01           &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6  7      Luna Plenty Wolf  probable   f  22 2023-01-01           &lt;NA&gt;</span></span>
<span><span class="co">#&gt;   date_death date_first_contact date_last_contact ct_value</span></span>
<span><span class="co">#&gt; 1       &lt;NA&gt;               &lt;NA&gt;              &lt;NA&gt;       NA</span></span>
<span><span class="co">#&gt; 2       &lt;NA&gt;         2023-01-03        2023-01-04       NA</span></span>
<span><span class="co">#&gt; 3       &lt;NA&gt;         2023-01-02        2023-01-03     25.4</span></span>
<span><span class="co">#&gt; 4       &lt;NA&gt;         2022-12-31        2023-01-03       NA</span></span>
<span><span class="co">#&gt; 5       &lt;NA&gt;         2023-01-03        2023-01-05       NA</span></span>
<span><span class="co">#&gt; 6       &lt;NA&gt;         2023-01-05        2023-01-07       NA</span></span></code></pre></div>
</details><div class="alert alert-warning">
<p>The minimum age of the youngest age group must match the age range specified in the <code>population_age</code> argument of <code><a href="../reference/sim_linelist.html">sim_linelist()</a></code>, and the largest age limit in the risk <code>&lt;data.frame&gt;</code> must not be older than the upper age range. If these conditions are not met the function will error.</p>
<p>If the age-stratified risk table does not match the default (<code>c(1, 90)</code>), the <code>population_age</code> argument will need to be set to match.</p>
</div>
<p>For example, the default age range of the population is 1 to 90 (inclusive). In our example above, the lowest age group started at 1 and the oldest age group stopped at 90. This matches the default <code>population_age = c(1, 90)</code>. However, see here that if the lower age limit exceeds the age range the function will not run.</p>
<details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age_dep_hosp_risk</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  age_limit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">95</span><span class="op">)</span>,</span>
<span>  risk <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.05</span>, <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">age_dep_hosp_risk</span></span>
<span><span class="co">#&gt;   age_limit risk</span></span>
<span><span class="co">#&gt; 1         1 0.10</span></span>
<span><span class="co">#&gt; 2         5 0.05</span></span>
<span><span class="co">#&gt; 3        95 0.20</span></span>
<span></span>
<span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_linelist.html">sim_linelist</a></span><span class="op">(</span></span>
<span>  contact_distribution <span class="op">=</span> <span class="va">contact_distribution</span>,</span>
<span>  infect_period <span class="op">=</span> <span class="va">infect_period</span>,</span>
<span>  prob_infect <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  onset_to_hosp <span class="op">=</span> <span class="va">onset_to_hosp</span>,</span>
<span>  onset_to_death <span class="op">=</span> <span class="va">onset_to_death</span>,</span>
<span>  hosp_risk <span class="op">=</span> <span class="va">age_dep_hosp_risk</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in .check_risk_df(hosp_risk, age_range = age_range): lower bound of oldest age group must be lower than highest age range</span></span></code></pre></div>
</details><p>In order to make this code run with the age-stratified hospitalisation risk given, the <code>population_age</code> can be adjusted. Here the oldest age bracket is now 95 to 100 (<code>[95, 100]</code>).</p>
<details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age_dep_hosp_risk</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  age_limit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">95</span><span class="op">)</span>,</span>
<span>  risk <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.05</span>, <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_linelist.html">sim_linelist</a></span><span class="op">(</span></span>
<span>  contact_distribution <span class="op">=</span> <span class="va">contact_distribution</span>,</span>
<span>  infect_period <span class="op">=</span> <span class="va">infect_period</span>,</span>
<span>  prob_infect <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  onset_to_hosp <span class="op">=</span> <span class="va">onset_to_hosp</span>,</span>
<span>  onset_to_death <span class="op">=</span> <span class="va">onset_to_death</span>,</span>
<span>  hosp_risk <span class="op">=</span> <span class="va">age_dep_hosp_risk</span>,</span>
<span>  population_age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">100</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id           case_name case_type sex age date_onset date_admission date_death</span></span>
<span><span class="co">#&gt; 1  1    Jonathan Trojahn  probable   m   4 2023-01-01           &lt;NA&gt;       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2  2        Frances Boyd confirmed   f  50 2023-01-01           &lt;NA&gt; 2023-01-15</span></span>
<span><span class="co">#&gt; 3  3         Tyler Pauly confirmed   m  62 2023-01-01     2023-01-01       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4  4    Samantha Brussel confirmed   f  51 2023-01-01           &lt;NA&gt;       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5  5 Kristian Cunningham suspected   m  18 2023-01-01           &lt;NA&gt;       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6  6      Daniel Holguin  probable   m  26 2023-01-03           &lt;NA&gt;       &lt;NA&gt;</span></span>
<span><span class="co">#&gt;   date_first_contact date_last_contact ct_value</span></span>
<span><span class="co">#&gt; 1               &lt;NA&gt;              &lt;NA&gt;       NA</span></span>
<span><span class="co">#&gt; 2         2023-01-02        2023-01-05       26</span></span>
<span><span class="co">#&gt; 3         2022-12-31        2023-01-03       26</span></span>
<span><span class="co">#&gt; 4         2022-12-30        2023-01-04       26</span></span>
<span><span class="co">#&gt; 5         2023-01-02        2023-01-05       NA</span></span>
<span><span class="co">#&gt; 6         2023-01-02        2023-01-03       NA</span></span></code></pre></div>
</details><p>Exactly the same method of age-stratified risks applies to death risks. First create the <code>&lt;data.frame&gt;</code> with the age groups and their respective, in this case, death risks, and then supply this to either the <code>hosp_death_risk</code> or <code>non_hosp_death_risk</code> arguments, to define the death risks in and outside the hospital, respectively, or both.</p>
<p>Here are a couple of examples:</p>
<details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age_dep_hosp_death_risk</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  age_limit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">80</span><span class="op">)</span>,</span>
<span>  risk <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.1</span>, <span class="fl">0.6</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">age_dep_hosp_death_risk</span></span>
<span><span class="co">#&gt;   age_limit risk</span></span>
<span><span class="co">#&gt; 1         1  0.3</span></span>
<span><span class="co">#&gt; 2         5  0.1</span></span>
<span><span class="co">#&gt; 3        80  0.6</span></span>
<span></span>
<span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_linelist.html">sim_linelist</a></span><span class="op">(</span></span>
<span>  contact_distribution <span class="op">=</span> <span class="va">contact_distribution</span>,</span>
<span>  infect_period <span class="op">=</span> <span class="va">infect_period</span>,</span>
<span>  prob_infect <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  onset_to_hosp <span class="op">=</span> <span class="va">onset_to_hosp</span>,</span>
<span>  onset_to_death <span class="op">=</span> <span class="va">onset_to_death</span>,</span>
<span>  hosp_death_risk <span class="op">=</span> <span class="va">age_dep_hosp_death_risk</span></span>
<span><span class="op">)</span></span></code></pre></div>
</details><details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age_dep_non_hosp_death_risk</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  age_limit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">80</span><span class="op">)</span>,</span>
<span>  risk <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.05</span>, <span class="fl">0.1</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">age_dep_non_hosp_death_risk</span></span>
<span><span class="co">#&gt;   age_limit risk</span></span>
<span><span class="co">#&gt; 1         1 0.10</span></span>
<span><span class="co">#&gt; 2         5 0.05</span></span>
<span><span class="co">#&gt; 3        80 0.10</span></span>
<span></span>
<span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_linelist.html">sim_linelist</a></span><span class="op">(</span></span>
<span>  contact_distribution <span class="op">=</span> <span class="va">contact_distribution</span>,</span>
<span>  infect_period <span class="op">=</span> <span class="va">infect_period</span>,</span>
<span>  prob_infect <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  onset_to_hosp <span class="op">=</span> <span class="va">onset_to_hosp</span>,</span>
<span>  onset_to_death <span class="op">=</span> <span class="va">onset_to_death</span>,</span>
<span>  non_hosp_death_risk <span class="op">=</span> <span class="va">age_dep_non_hosp_death_risk</span></span>
<span><span class="op">)</span></span></code></pre></div>
</details><p>Up until now these age-stratified tables have only been supplied to one risk. However, these can be supplied in the same simulation. In this case the hospitalisation risk, and death risks inside and outside of hospital, are all specified.</p>
<details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age_dep_hosp_risk</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  age_limit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">80</span><span class="op">)</span>,</span>
<span>  risk <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.05</span>, <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">age_dep_hosp_death_risk</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  age_limit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">80</span><span class="op">)</span>,</span>
<span>  risk <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.1</span>, <span class="fl">0.6</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">age_dep_non_hosp_death_risk</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  age_limit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">80</span><span class="op">)</span>,</span>
<span>  risk <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.05</span>, <span class="fl">0.1</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_linelist.html">sim_linelist</a></span><span class="op">(</span></span>
<span>  contact_distribution <span class="op">=</span> <span class="va">contact_distribution</span>,</span>
<span>  infect_period <span class="op">=</span> <span class="va">infect_period</span>,</span>
<span>  prob_infect <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  onset_to_hosp <span class="op">=</span> <span class="va">onset_to_hosp</span>,</span>
<span>  onset_to_death <span class="op">=</span> <span class="va">onset_to_death</span>,</span>
<span>  hosp_risk <span class="op">=</span> <span class="va">age_dep_hosp_risk</span>,</span>
<span>  hosp_death_risk <span class="op">=</span> <span class="va">age_dep_hosp_death_risk</span>,</span>
<span>  non_hosp_death_risk <span class="op">=</span> <span class="va">age_dep_non_hosp_death_risk</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id         case_name case_type sex age date_onset date_admission date_death</span></span>
<span><span class="co">#&gt; 1  1       Sage Hughes confirmed   m  69 2023-01-01           &lt;NA&gt;       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2  5 Cheyenne Whiteman confirmed   f  39 2023-01-01           &lt;NA&gt;       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3  7 Quentin Hiromitsu confirmed   m  56 2023-01-01           &lt;NA&gt;       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4  8    Daniel Dickson confirmed   m  59 2023-01-02     2023-01-08 2023-01-18</span></span>
<span><span class="co">#&gt; 5  9    Edrick Shigaya suspected   m  30 2023-01-02           &lt;NA&gt;       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6 12     Aaron Newbury suspected   m  23 2023-01-03           &lt;NA&gt;       &lt;NA&gt;</span></span>
<span><span class="co">#&gt;   date_first_contact date_last_contact ct_value</span></span>
<span><span class="co">#&gt; 1               &lt;NA&gt;              &lt;NA&gt;       26</span></span>
<span><span class="co">#&gt; 2         2022-12-30        2023-01-05       26</span></span>
<span><span class="co">#&gt; 3         2023-01-02        2023-01-05       26</span></span>
<span><span class="co">#&gt; 4         2022-12-29        2023-01-02       26</span></span>
<span><span class="co">#&gt; 5         2022-12-31        2023-01-01       NA</span></span>
<span><span class="co">#&gt; 6         2022-12-30        2023-01-03       NA</span></span></code></pre></div>
</details>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Joshua W. Lambert, Carmen Tamayo.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
