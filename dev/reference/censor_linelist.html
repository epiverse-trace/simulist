<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Censor dates in line list — censor_linelist • simulist</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Censor dates in line list — censor_linelist"><meta name="description" content="Censor &amp;lt;Date&amp;gt; columns in line list output from sim_linelist() to a
specified time interval.
This function is similar to incidence2::incidence() but does not aggregate
events into an &amp;lt;incidence2&amp;gt; object, instead it returns the same line list
&amp;lt;data.frame&amp;gt; as input but with modified event dates."><meta property="og:description" content="Censor &amp;lt;Date&amp;gt; columns in line list output from sim_linelist() to a
specified time interval.
This function is similar to incidence2::incidence() but does not aggregate
events into an &amp;lt;incidence2&amp;gt; object, instead it returns the same line list
&amp;lt;data.frame&amp;gt; as input but with modified event dates."><meta property="og:image" content="https://epiverse-trace.github.io/simulist/logo.svg"><meta name="robots" content="noindex"><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XZ471458FQ');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">
    <a href="https://epiverse-trace.github.io/" class="external-link"><img src="https://epiverse-trace.github.io/blueprints/logo_white.svg" id="logo" alt="Epiverse-TRACE"></a>
    <a class="navbar-brand me-2" href="../index.html">simulist</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.5.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/simulist.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Customising simulated outbreak</h6></li>
    <li><a class="dropdown-item" href="../articles/age-strat-risks.html">Age-stratified hospitalisation and death risks</a></li>
    <li><a class="dropdown-item" href="../articles/age-struct-pop.html">Age-structured population</a></li>
    <li><a class="dropdown-item" href="../articles/time-varying-cfr.html">Time-varying case fatality risk</a></li>
    <li><a class="dropdown-item" href="../articles/reporting-delays-truncation.html">Reporting delays and right-truncation of line list data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Wrangling and plotting data</h6></li>
    <li><a class="dropdown-item" href="../articles/wrangling-linelist.html">Wrangling simulated outbreak data</a></li>
    <li><a class="dropdown-item" href="../articles/vis-linelist.html">Visualising simulated data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Developer Documentation</h6></li>
    <li><a class="dropdown-item" href="../articles/design-principles.html">Design Principles for {simulist}</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epiverse-trace/simulist/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Censor dates in line list</h1>
      <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/simulist/blob/main/R/censor_linelist.R" class="external-link"><code>R/censor_linelist.R</code></a></small>
      <div class="d-none name"><code>censor_linelist.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Censor <code>&lt;Date&gt;</code> columns in line list output from <code><a href="sim_linelist.html">sim_linelist()</a></code> to a
specified time interval.</p>
<p>This function is similar to <code><a href="https://rdrr.io/pkg/incidence2/man/incidence.html" class="external-link">incidence2::incidence()</a></code> but does not aggregate
events into an <code>&lt;incidence2&gt;</code> object, instead it returns the same line list
<code>&lt;data.frame&gt;</code> as input but with modified event dates.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">censor_linelist</span><span class="op">(</span></span>
<span>  <span class="va">linelist</span>,</span>
<span>  <span class="va">interval</span>,</span>
<span>  reporting_artefact <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"none"</span>, <span class="st">"weekend_effects"</span><span class="op">)</span>,</span>
<span>  offset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">linelist</span><span class="op">$</span><span class="va">date_onset</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-linelist">linelist<a class="anchor" aria-label="anchor" href="#arg-linelist"></a></dt>
<dd><p>Line list <code>&lt;data.frame&gt;</code> output from <code><a href="sim_linelist.html">sim_linelist()</a></code>.</p></dd>


<dt id="arg-interval">interval<a class="anchor" aria-label="anchor" href="#arg-interval"></a></dt>
<dd><p>An <code>integer</code> or <code>character</code> string for the size of the time
interval for censoring. Valid <code>character</code> options are:</p><ul><li><p><code>"daily</code></p></li>
<li><p><code>"weekly"</code></p></li>
<li><p><code>"epiweek"</code></p></li>
<li><p><code>"montly"</code></p></li>
<li><p><code>"yearly"</code></p></li>
</ul><p>See details for information of the date/period objects that are returned for
each interval type.</p></dd>


<dt id="arg-reporting-artefact">reporting_artefact<a class="anchor" aria-label="anchor" href="#arg-reporting-artefact"></a></dt>
<dd><p>A <code>character</code> string, either <code>"none"</code> (default) or
<code>"weekend_effect"</code>. By default none of the dates are altered in other ways
during censoring, however if <code>reporting_artefact = "weekend_effect"</code> then
all the dates in the <code>$date_reporting</code> column that fall on a weekend are
shifted to the following Monday. This artefact is commonly referred to as the
<a href="https://doi.org/10.1186/s13104-025-07145-y" class="external-link">"weekend effect"</a>.</p></dd>


<dt id="arg-offset">offset<a class="anchor" aria-label="anchor" href="#arg-offset"></a></dt>
<dd><p>An <code>integer</code> or <code>&lt;Date&gt;</code> for the value to start counting the
period from (0 is the start of the Unix epoch). Only applicable if
<code>interval</code> is specified as an <code>integer</code>.</p>
<p>Default date used to start counting from for the <code>&lt;grates_period&gt;</code> is the
earliest symptom onset date (<code>$date_onset</code>). See <code><a href="https://rdrr.io/pkg/grates/man/period_class.html" class="external-link">grates::as_period()</a></code> for
more information.</p>
<p>If setting <code>reporting_artefact = "weekend_effects"</code> the period may start or
end on a weekend.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A line list <code>&lt;data.frame&gt;</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The line list columns that contain <code>&lt;Date&gt;</code> objects are stored at double
point precision by default. In other words, they are not <code>integer</code> values,
so can be part way through a day. The exact numeric value of the <code>&lt;Date&gt;</code>
can be seen if you <code><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass()</a></code> it.</p>
<p>Censoring line list dates reduces the time precision (window) of the event.
Often dates of events, such as symptom onset or hospital admission are only
known to the nearest day, not hour or minute. Other events may be more
coarsely censored, for example to the nearest week or month.
<code>censor_linelist()</code> converts the exact double point precision event
<code>&lt;Date&gt;</code> to the time <code>interval</code> specified.</p>
<p>Depending on the <code>interval</code> specified, the date columns will be returned
as different objects. Here is a list of the valid input <code>interval</code> and the
resulting class of the date column.</p><ul><li><p><code>integer</code> -&gt; <code>&lt;grates_period&gt;</code> (see <code><a href="https://rdrr.io/pkg/grates/man/period_class.html" class="external-link">grates::as_period()</a></code>)</p></li>
<li><p><code>"daily"</code> -&gt; <code>&lt;Date&gt;</code> (see <a href="https://rdrr.io/r/base/Dates.html" class="external-link">Date</a>)</p></li>
<li><p><code>"weekly"</code> -&gt; <code>&lt;grates_isoweek&gt;</code> (see <code><a href="https://rdrr.io/pkg/grates/man/isoweek_class.html" class="external-link">grates::as_isoweek()</a></code>)</p></li>
<li><p><code>"epiweek"</code> -&gt; <code>&lt;grates_epiweek&gt;</code> (see <code><a href="https://rdrr.io/pkg/grates/man/epiweek_class.html" class="external-link">grates::as_epiweek()</a></code>)</p></li>
<li><p><code>"monthly"</code> -&gt; <code>&lt;grates_yearmonth&gt;</code> (see <code><a href="https://rdrr.io/pkg/grates/man/yearmonth_class.html" class="external-link">grates::as_yearmonth()</a></code>)</p></li>
<li><p><code>"yearly"</code> -&gt; <code>&lt;grates_year&gt;</code> (see <code><a href="https://rdrr.io/pkg/grates/man/year_class.html" class="external-link">grates::as_year()</a></code>)</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim_linelist.html">sim_linelist</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">linelist_cens</span> <span class="op">&lt;-</span> <span class="fu">censor_linelist</span><span class="op">(</span><span class="va">linelist</span>, interval <span class="op">=</span> <span class="st">"daily"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># censor to a 3-day period</span></span></span>
<span class="r-in"><span><span class="va">linelist_cens</span> <span class="op">&lt;-</span> <span class="fu">censor_linelist</span><span class="op">(</span><span class="va">linelist</span>, interval <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># no reporting of events on weekends</span></span></span>
<span class="r-in"><span><span class="va">linelist_cens</span> <span class="op">&lt;-</span> <span class="fu">censor_linelist</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">linelist</span>,</span></span>
<span class="r-in"><span>  interval <span class="op">=</span> <span class="st">"daily"</span>,</span></span>
<span class="r-in"><span>  reporting_artefact <span class="op">=</span> <span class="st">"weekend_effects"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Joshua W. Lambert, Carmen Tamayo.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3. Theme provided by <a href="https://github.com/epiverse-trace/epiversetheme" class="external-link">epiversetheme</a> 0.1.0.</p>
</div>

    </footer></div>





  </body></html>

